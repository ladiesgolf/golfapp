<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="ie=edge" http-equiv="X-UA-Compatible">
  <meta name="theme-color" content="#2F4F4F">
  <title>winter 2023</title>
  <link href='https://fonts.googleapis.com/css?family=Kalam' rel='stylesheet'>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;


 /* vh fix */
/*  â€” app-height: 100%; */



    }
    
    html, body
{
  min-height: 100%;
  padding: 0;
  margin: 0;
}

body
{
  display: grid;
  grid:
    "myheader" auto
    "mymain" minmax(0,1fr)
    "myfooter" auto /
    minmax(10rem, 90rem);
}

header
{
  grid-area: myheader;
  background: yellow;
}

main
{
  grid-area: mymain;
  background: pink;
  align-self: center
    /* or stretch
      + display: flex;
      + flex-direction: column;
      + justify-content: center; */
}

footer
{
  grid-area: myfooter;
  background: cyan;
  bottom: 0;
}

.spacer {
  clear: both;
  height: 50px;
}

  </style>
  <meta content="score input" name="description">
  <meta content="Bryan M" name="author">
  <link href="wintericon.png" rel="icon" type="image/x-icon">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js"></script>
</head>

<body>
  <!--
  <header>Header content</header>
  -->
  <main>Main content which should be centered and the content length may change.
  <details><summary>Collapsible content</summary>
  <p>Here's some text to cause more vertical space to be used.</p>
  <p>Here's some text to cause more vertical space to be used (2).</p>
  <p>Here's some text to cause more vertical space to be used (3).</p>
  <p>Here's some text to cause more vertical space to be used (4).</p>
  <p>Here's some text to cause more vertical space to be used (5).</p>
  <p>Here's some text to cause more vertical space to be used.</p>
  <p>Here's some text to cause more vertical space to be used (2).</p>
  <p>Here's some text to cause more vertical space to be used (3).</p>
  <p>Here's some text to cause more vertical space to be used (4).</p>
  <p>Here's some text to cause more vertical space to be used (5).</p>
  <p>Here's some text to cause more vertical space to be used.</p>
  <p>Here's some text to cause more vertical space to be used (2).</p>
  <p>Here's some text to cause more vertical space to be used (3).</p>
  <p>Here's some text to cause more vertical space to be used (4).</p>
  <p>Here's some text to cause more vertical space to be used (5).</p>
  <p>Here's some text to cause more vertical space to be used.</p>
  <p>Here's some text to cause more vertical space to be used (2).</p>
  <p>Here's some text to cause more vertical space to be used (3).</p>
  <p>Here's some text to cause more vertical space to be used (4).</p>
  <p>Here's some text to cause more vertical space to be used (5).</p>
  <p>Here's some text to cause more vertical space to be used.</p>
  <p>Here's some text to cause more vertical space to be used (2).</p>
  <p>Here's some text to cause more vertical space to be used (3).</p>
  <p>Here's some text to cause more vertical space to be used (4).</p>
  <p>Here's some text to cause more vertical space to be used (5).</p>
  <p>Here's some text to cause more vertical space to be used.</p>
  
  </details>
  </main>
  <footer>Footer content</footer>
  <script>













function setDocHeight() {
document.documentElement.style.setProperty('--vh', `${window.innerHeight/100}px`);
};

window.addEventListener('resize', setDocHeight());
window.addEventListener('orientationchange', setDocHeight());

setDocHeight();












    //===========================
    // this code runs at startup
    //===========================
    // declare global variables
    var hcp = "hcp";
    var player = "select player";
    var course;
    var comp;
    var compday = "no";
    // hide hands after 1 score entry
    if ("handsswiperight" in localStorage) {
       // hide hands
       document.getElementById("swiperight").style.visibility = "hidden"
    } else {
       localStorage.handsswiperight = "hidden" 
    }   
    // set up courses with details for calculations etc.
    // array ["hole num",par,si]
    // Lakes
    arrLakes = [
      [0, 0, 0],
      [1, 4, 15],
      [2, 4, 7],
      [3, 5, 3],
      [4, 4, 1],
      [5, 3, 17],
      [6, 3, 11],
      [7, 4, 9],
      [8, 4, 5],
      [9, 4, 13],
      [10, 3, 16],
      [11, 4, 18],
      [12, 4, 10],
      [13, 4, 6],
      [14, 3, 14],
      [15, 3, 4],
      [16, 5, 12],
      [17, 4, 2],
      [18, 5, 8]
    ];
    // array ["hole num",par,si]
    // Dawson
    arrDawson = [
      [0, 0, 0],
      [1, 5, 13],
      [2, 4, 15],
      [3, 3, 17],
      [4, 4, 3],
      [5, 4, 1],
      [6, 5, 11],
      [7, 4, 7],
      [8, 4, 9],
      [9, 5, 5],
      [10, 4, 16],
      [11, 5, 14],
      [12, 3, 18],
      [13, 4, 2],
      [14, 4, 4],
      [15, 4, 12],
      [16, 3, 6],
      [17, 4, 10],
      [18, 4, 8]
    ];
    // array of competition dates
    // these need to be the same as the setup page on google sheets
    // if they are to be recorded properly in the results
    arrComps = [
      "Dawson 02 October 2023",
      "Lakes 06 October 2023",
      "Dawson 09 October 2023",
      "Lakes 13 October 2023",
      "Dawson 16 October 2023",
      "Lakes 20 October 2023",
      "Dawson 23 October 2023",
      "Lakes 27 October 2023",
      "Dawson 30 October 2023",
      "Dawson 03 November 2023",
      "Lakes 06 November 2023",
      "Dawson 10 November 2023",
      "Lakes 13 November 2023",
      "Dawson 17 November 2023",
      "Lakes 20 November 2023",
      "Dawson 24 November 2023",
      "Lakes 27 November 2023",
      "Lakes 01 December 2023",
      "Dawson 04 December 2023",
      "Lakes 08 December 2023",
      "Dawson 11 December 2023",
      "Lakes 15 December 2023",
      "Dawson 18 December 2023",
      "Lakes 22 December 2023",
      "Dawson 25 December 2023",
      "Lakes 29 December 2023",
      "Lakes 01 January 2024",
      "Dawson 05 January 2024",
      "Lakes 08 January 2024",
      "Dawson 12 January 2024",
      "Lakes 15 January 2024",
      "Dawson 19 January 2024",
      "Lakes 22 January 2024",
      "Dawson 26 January 2024",
      "Lakes 29 January 2024",
      "Lakes 02 February 2024",
      "Dawson 05 February 2024",
      "Lakes 09 February 2024",
      "Dawson 12 February 2024",
      "Lakes 16 February 2024",
      "Dawson 19 February 2024",
      "Lakes 23 February 2024",
      "Dawson 26 February 2024",
      "Dawson 01 March 2024",
      "Lakes 04 March 2024",
      "Dawson 08 March 2024",
      "Lakes 11 March 2024",
      "Dawson 15 March 2024",
      "Lakes 18 March 2024",
      "Dawson 22 March 2024",
      "Lakes 25 March 2024",
      "Dawson 29 March 2024"
    ];
    // master array of members
    // this is the centralised list of members, the 0 is used to allow a "sorted" menu
    // by keeping track of the number of "hits" per name
    var master = [
      ['Graham Airey', 0],
      ['Dale Aitkenhead', 0],
      ['Stephen Alldridge', 0],
      ['Keith Belshaw', 0],
      ['Malcolm Broom', 0],
      ['Neil Brotherton', 0],
      ['Craig Caesar', 0],
      ['Clive Caisley', 0],
      ['Chris Chelton', 0],
      ['Ken Clark', 0],
      ['Ian Collier', 0],
      ['Bob Connelly', 0],
      ['Jed Cornhill', 0],
      ['Alex Coupland', 0],
      ['Neil Coxon', 0],
      ['Bryan Craggs', 0],
      ['Andy Davison', 0],
      ['John Dean', 0],
      ['Peter Dodds', 0],
      ['Graham Doughty', 0],
      ['Martin Edwards', 0],
      ['Joe Fletcher', 0],
      ['Norman Ford', 0],
      ['Bill French', 0],
      ['Norman Gilholm', 0],
      ['David Gilroy', 0],
      ['Graeme Gow', 0],
      ['Vince Graham', 0],
      ['Chris Green', 0],
      ['Rob Green', 0],
      ['Richard Hedley', 0],
      ['Barry Henderson', 0],
      ['Clive Herbert', 0],
      ['David Hersey', 0],
      ['Ken Heslop', 0],
      ['Barry Hill', 0],
      ['Colin Hills', 0],
      ['Pete Holleran', 0],
      ['Roger Ireland', 0],
      ['David Jackson', 0],
      ['John Jackson', 0],
      ['Tom Lemin', 0],
      ['Martin Leonard', 0],
      ['Jim Little', 0],
      ['Bryan Maddison', 0],
      ['James Main', 0],
      ['Tony Main', 0],
      ['John Matthews', 0],
      ['Tom McNally', 0],
      ['Steff Murray', 0],
      ['Darren Nelson', 0],
      ['Trevor Ord', 0],
      ['James Patterson', 0],
      ['Tim Pinkney', 0],
      ['Mike Riddell', 0],
      ['Eric Saddler', 0],
      ['David Scurfield', 0],
      ['Brian Simpson', 0],
      ['John Smith', 0],
      ['Tony Smith', 0],
      ['Ray Straker', 0],
      ['Tom Straker', 0],
      ['Neil Tait', 0],
      ['Roly Thompson', 0],
      ['Bob Toward', 0],
      ['Trevor Towns', 0],
      ['Joe Waddle', 0],
      ['Marcus Wilkinson', 0],
      ['Gordon Willis', 0],
      ['Ron Woodcock', 0],
      ['reset list', 0]
    ];
    // check for any new members etc.
    // setup local dropdown if not there
    if (!("dropdown" in localStorage)) {
      //=====LocalStorage.dropdown===================
      localStorage.dropdown = JSON.stringify(master);
      //=============================================
    }
    // default notsame to false
    var notsame = false;
    if ("dropdown" in localStorage) {
      // retrieve dropdown info
      var options = JSON.parse(localStorage.dropdown);
      // see if different number of items
      if (options.length !== master.length) {
        notsame = true;
      } else {
        // Comparing each element of your array
        for (var i = 0; i < options.length; i++) {
          // see if items are different
          if (options[i][0] !== master[i][0]) {
            notsame = true;
          }
        }
      }
    };


    // if different
    if (notsame) {
      // option is original, master is new
      // update new with numbers from original
      for (var i = 0; i < options.length; i++) {
        for (var j = 0; j < master.length; j++) {
          if (options[i][0] == master[j][0]) {
            master[j][1] = options[i][1];
          }
        }
      }
      options = JSON.parse(JSON.stringify(master));
      //=====LocalStorage.dropdown====================
      localStorage.dropdown = JSON.stringify(options);
      //==============================================
    }

    // bring most commonly selected to the top
    options.sort(compareSecondColumn);
    // create player dropdown
    var select = document.getElementById("myDropdown");
    // this is what is created
    //<a id="myLink1" href="#" onclick='dropSelected(this.innerText);return false;'>Graham Airey</a>
    //
    for (var i = 0; i < options.length; i++) {
      var el = document.createElement("a");
      el.id = "myLink" + (i + 1);
      el.setAttribute("onclick", "dropSelected(this.innerText);return false;");
      el.setAttribute("href", "#");
      el.innerText = options[i][0];
      select.appendChild(el);
      if (options[i][1] > 0) {
        document.getElementById("myLink" + (i + 1)).style.color = "blue";
        document.getElementById("myLink" + (i + 1)).style.background = "lightBlue";
      }
    }
    // Close the dropdown if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    };
    // get todays date eg 26 June
    dd = new Date();
    // get date number and format it
    d1 = dd.getDate();
    if (d1 < 10) {
      d1 = "0" + d1;
    }
    // get month and format it
    d2 = dd.getMonth();

    if (d2 == 0) {
      m = "January";
    }
    if (d2 == 1) {
      m = "February";
    }
    if (d2 == 2) {
      m = "March";
    }
    if (d2 == 3) {
      m = "April";
    }
    if (d2 == 4) {
      m = "May";
    }
    if (d2 == 5) {
      m = "June";
    }
    if (d2 == 6) {
      m = "July";
    }
    if (d2 == 7) {
      m = "August";
    }
    if (d2 == 8) {
      m = "September";
    }
    if (d2 == 9) {
      m = "October";
    }
    if (d2 == 10) {
      m = "November";
    }
    if (d2 == 11) {
      m = "December";
    }
    dateToday = d1 + " " + m;
    // tidy localStorage if out of date to allow new "blank" setup
    if ("comp" in localStorage) {
      if (localStorage.comp.indexOf(dateToday) == -1) {
        // tidy
        clearCache();
      }
    }
    // recover data if dates match
    // this allows data to be kept over refreshes
    if ("comp" in localStorage) {
      if (localStorage.comp.indexOf(dateToday) > -1) {
        // recover
        recoverFromLocalStorage();
      }
    }
    // see if it is a compday and if so find comp and course from array list
    for (i = 0; i < arrComps.length; i++) {
      // if today - eg. "22 June" in arrComps list then compday = "yes"
      if (arrComps[i].indexOf(d1 + " " + m) > -1) {
        compday = "yes";
        comp = arrComps[i];
        //console.log("comp = " + comp)
        //console.log("course Lakes = " + arrComps[i].indexOf("Lakes"))
        //console.log("course Dawson = " + arrComps[i].indexOf("Dawson"))
        if (arrComps[i].indexOf("Lakes") > -1) {
          // global course
          course = "Lakes";
          // localStorage course
          localStorage.course = "Lakes";
        }
        if (arrComps[i].indexOf("Dawson") > -1) {
          // global course
          course = "Dawson";
          // localStorage course
          localStorage.course = "Dawson";
        }
      }
    }
    //console.log("course = " + course)	
    if (compday == "yes") {
      localStorage.comp = comp;
    }
    // if not a compday find out what course is played and create a comp
    if (compday == "no") {
      if (!("comp" in localStorage)) {
        showCourseChoice();
      }
    }
    // recover	
    if (comp == localStorage.comp) {
      recoverFromLocalStorage();
    }
    // show comp info message for 3 seconds
    if ("comp" in localStorage) {
      showCompMessage();
    }
    //=============================================================
    // functions - run when called
    //=============================================================     
    function resetNames() {
      // create/recreate options favourites
      // run from menu item at bottom of list
      options = JSON.parse(JSON.stringify(master));
      // update local storage
      //=====LocalStorage.dropdown====================
      localStorage.dropdown = JSON.stringify(options);
      //==============================================
      // bring most commonly selected to the top
      // options.sort(compareSecondColumn);
      // create player dropdown
      var select = document.getElementById("myDropdown");
      // empty names
      select.innerHTML = "";
      // redo list for menu
      // <a id="myLink1" href="#" onclick='dropSelected(this.innerText);return false;'>Graham Airey</a>
      //
      for (var i = 0; i < options.length; i++) {
        var el = document.createElement("a");
        el.id = "myLink" + (i + 1);
        el.setAttribute("onclick", "dropSelected(this.innerText);return false;");
        el.setAttribute("href", "#");
        el.innerText = options[i][0];
        select.appendChild(el);
      }
    }
    // sort function to sort by second array item in 2D array
    function compareSecondColumn(a, b) {
      if (a[1] === b[1]) {
        return 0;
      } else {
        return (a[1] > b[1]) ? -1 : 1;
      }
    }
    // name selected, do stuff
    function dropSelected(playerName) {
      if (playerName == "reset list") {
        resetNames();
      } else {
        for (var k = 0; k < options.length; k++) {
          if (options[k][0] == playerName) {
            found = true;
            pos = k;
          }
        }
        // change color on selection
        document.getElementById("myLink" + (pos + 1)).style.color = "blue";
        document.getElementById("myLink" + (pos + 1)).style.background = "lightBlue";
        // update player choice
        player2submit = document.getElementById("myLink" + (pos + 1)).innerText;
        if (pos > 0) {
          // increment number of times chosen
          var tc = parseInt(options[pos][1]) + 1;
          options[pos][1] = tc;
          // store new order
          //=====LocalStorage.dropdown====================
          localStorage.dropdown = JSON.stringify(options);
          //==============================================
        }
        // global player
        player = playerName;
        // replace button name
        element = document.getElementById("dropbtn");
        element.innerText = player;
        // update player choices
        // reset hole scores
        //=====LocalStorage.player=====
        localStorage.player = player;
        //=============================
        player2submit = player;
        // close dropdown
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }

        doGetHCP();
      }
    }

    // show menu of names
    function myFunction() {
      // When the user clicks on the button, toggle between hiding and showing the dropdown content
      document.getElementById("myDropdown").classList.toggle("show");
    }

    //=================================================
    // look after swipes etc.
    // global keep track of swipes
    //=================================================
    var touchstartX = 0;
    var touchendX = 0;
    // do stuff when swiped
    function checkDirection() {
      if (touchendX < touchstartX) {
        // clear swipe icon
        console.log("here 1")
        document.getElementById("swiperight").innerHTML = "";
        console.log("here 2")
        // unblur submit button
        // document.getElementById("submitwrapper").style.filter = "none";
        document.getElementById("submitwrapper").style.visibility = "visible";

        if (localStorage.getItem("player") == null || localStorage.getItem("hcp") == null) {
          // prevent some false messages
          if ((touchstartX - touchendX) > 100) {
            showSetPlayerMessage();
          }
        }
      }
    }
    document.addEventListener('touchstart', e => {
      touchstartX = e.changedTouches[0].screenX;
    });
    document.addEventListener('touchend', e => {
      touchendX = e.changedTouches[0].screenX;
      checkDirection();
    });

    //====================================================
    //
    //====================================================

    /*
     prefilled form from google forms to allow inputs
     https://docs.google.com/forms/d/e/1FAIpQLSfz7JwsoPVvFYEiZqlH2IS3YOw7OuT9hQEdN1O8zfLXWtU4sw/viewform?usp=pp_url&
    	entry.474474348=player&
    	entry.2131369517=comp&
    	entry.477101370=hcp&
    	entry.1980297491=s1&
    	entry.463832232=s2&
    	entry.205704642=s3&
    	entry.278278589=s4&
    	entry.949547387=s5&
    	entry.703011397=s6&
    	entry.1460583253=s7&
    	entry.462940045=s8&
    	entry.477691508=s9&
    	entry.413249407=s10&
    	entry.108900453=s11&
    	entry.1841236411=s12&
    	entry.1864644918=s13&
    	entry.1538428689=s14&
    	entry.1449918213=s15&
    	entry.38761817=s16&
    	entry.247392471=s17&
    	entry.741809181=s18&
    	entry.1362729237=p1&
    	entry.1372983908=p2&
    	entry.2002196917=p3&
    	entry.640802794=p4&
    	entry.2076656246=p5&
    	entry.486346919=p6&
    	entry.1918313229=p7&
    	entry.638821=p8&
    	entry.737099688=p9&
    	entry.488827232=p10&
    	entry.1203421487=p11&
    	entry.979421831=p12&
    	entry.929858153=p13&
    	entry.1330487443=p14&
    	entry.940496448=p15&
    	entry.1127168348=p16&
    	entry.638332104=p17&
    	entry.1626319908=p18&
    	entry.362674948=out9&
    	entry.544180710=back9&
    	entry.893562950=totalpoints&
    	entry.335596501=cb9&
    	entry.1453506389=cb6&
    	entry.1045870519=cb3&
    	entry.683300283=cb1&
    	entry.967906330=twos&
    	entry.789190149=compplayer
    	*/
    // send info from HTML form to google form	
    function submitForm() {
      // get the relevant info into a form
      // dont allow submit for an incorrect day
      if (compday == "no") {
        showNoSubmitMessage();
      } else {
        document.getElementById('mx474474348').value = player;
        document.getElementById('mx2131369517').value = comp;
        document.getElementById('mx477101370').value = hcp;
        document.getElementById('mx1980297491').value = document.getElementById("h1").innerText;
        document.getElementById('mx463832232').value = document.getElementById("h2").innerText;
        document.getElementById('mx205704642').value = document.getElementById("h3").innerText;
        document.getElementById('mx278278589').value = document.getElementById("h4").innerText;
        document.getElementById('mx949547387').value = document.getElementById("h5").innerText;
        document.getElementById('mx703011397').value = document.getElementById("h6").innerText;
        document.getElementById('mx1460583253').value = document.getElementById("h7").innerText;
        document.getElementById('mx462940045').value = document.getElementById("h8").innerText;
        document.getElementById('mx477691508').value = document.getElementById("h9").innerText;
        document.getElementById('mx413249407').value = document.getElementById("h10").innerText;
        document.getElementById('mx108900453').value = document.getElementById("h11").innerText;
        document.getElementById('mx1841236411').value = document.getElementById("h12").innerText;
        document.getElementById('mx1864644918').value = document.getElementById("h13").innerText;
        document.getElementById('mx1538428689').value = document.getElementById("h14").innerText;
        document.getElementById('mx1449918213').value = document.getElementById("h15").innerText;
        document.getElementById('mx38761817').value = document.getElementById("h16").innerText;
        document.getElementById('mx247392471').value = document.getElementById("h17").innerText;
        document.getElementById('mx741809181').value = document.getElementById("h18").innerText;
        document.getElementById('mx1362729237').value = document.getElementById("p1").innerText;
        document.getElementById('mx1372983908').value = document.getElementById("p2").innerText;
        document.getElementById('mx2002196917').value = document.getElementById("p3").innerText;
        document.getElementById('mx640802794').value = document.getElementById("p4").innerText;
        document.getElementById('mx2076656246').value = document.getElementById("p5").innerText;
        document.getElementById('mx486346919').value = document.getElementById("p6").innerText;
        document.getElementById('mx1918313229').value = document.getElementById("p7").innerText;
        document.getElementById('mx638821').value = document.getElementById("p8").innerText;
        document.getElementById('mx737099688').value = document.getElementById("p9").innerText;
        document.getElementById('mx488827232').value = document.getElementById("p10").innerText;
        document.getElementById('mx1203421487').value = document.getElementById("p11").innerText;
        document.getElementById('mx979421831').value = document.getElementById("p12").innerText;
        document.getElementById('mx929858153').value = document.getElementById("p13").innerText;
        document.getElementById('mx1330487443').value = document.getElementById("p14").innerText;
        document.getElementById('mx940496448').value = document.getElementById("p15").innerText;
        document.getElementById('mx1127168348').value = document.getElementById("p16").innerText;
        document.getElementById('mx638332104').value = document.getElementById("p17").innerText;
        document.getElementById('mx1626319908').value = document.getElementById("p18").innerText;
        document.getElementById('mx362674948').value = document.getElementById("pfront").innerText;
        document.getElementById('mx544180710').value = document.getElementById("pback").innerText;
        document.getElementById('mx893562950').value = document.getElementById("ptotal").innerText;
        //document.getElementById('mx335596501').value = document.getElementById("cback9");
        document.getElementById('mx335596501').value = document.getElementById("pback").innerText;
        tempcb6 = 0;
        tempcb6 += parseInt(document.getElementById("p18").innerText);
        tempcb6 += parseInt(document.getElementById("p17").innerText);
        tempcb6 += parseInt(document.getElementById("p16").innerText);
        tempcb6 += parseInt(document.getElementById("p15").innerText);
        tempcb6 += parseInt(document.getElementById("p14").innerText);
        tempcb6 += parseInt(document.getElementById("p13").innerText);
        tempcb3 = 0;
        tempcb3 += parseInt(document.getElementById("p18").innerText);
        tempcb3 += parseInt(document.getElementById("p17").innerText);
        tempcb3 += parseInt(document.getElementById("p16").innerText);
        document.getElementById('mx1453506389').value = tempcb6;
        document.getElementById('mx1045870519').value = tempcb3;
        document.getElementById('mx683300283').value = document.getElementById("p18").innerText;
        //temp2 = 0;
        twoscount = 0;
        // check data is complete 
        checkBeforeSubmitID = "\n";
        err = "no";
        for (ii = 1; ii <= 18; ii++) {
          if (document.getElementById("h" + ii).innerText == "2") {
            twoscount++;
          }
          //if("12345678910".indexOf(document.getElementById("h" + ii).innerText) == -1) {
          //	checkBeforeSubmit++;
          //	checkBeforeSubmitID += "hole " + ii + "\n";
          //}
          // check for no score entered
          if (document.getElementById("numscore" + ii).innerText.indexOf("hole") > -1) {
            if (checkBeforeSubmitID.length < 50) {
              checkBeforeSubmitID += "hole " + ii + " not scored\n";
              err = "yes";
            }
          }
        }
        document.getElementById('mx967906330').value = twoscount.toString();
        document.getElementById('mx789190149').value = comp + player;

        if (player == "select player") {
          checkBeforeSubmitID += "player not set\n"
          err = "yes";
        }
        if (hcp == "hcp") {
          checkBeforeSubmitID += "hcp not set\n"
          err = "yes";
        }

        if (err == "yes") {
          // error message
          checkBeforeSubmitID = checkBeforeSubmitID + "\n... maybe more.\n";
          showIncompleteSubmitData(checkBeforeSubmitID);
        } else {
          //===== submit data




// do a check on latest submit for this player
// format is 12:22Bryan Maddison
if (localStorage.LastSubmit) {
    var lastPlayerSubmitDetails = localStorage.LastSubmit
    var lastPlayer = lastPlayerSubmitDetails.substring(8)
    var lastSubmitTime = lastPlayerSubmitDetails.substring(0,8)
} else {
    var lastPlayer = ""
    var lastSubmitTime = "" 
}
alert("==" + lastPlayer + "==" + player + "==")
if (lastPlayer == player) {
     alert(lastPlayer + " already submitted at " + lastSubmitTime)
} else {
     // must be a new player so record it
     date = new Date(); 
     hh = date.getHours();
     mm = date.getMinutes();
     ss = date.getSeconds();
     localStorage.LastSubmit = hh + ":" + mm + ":" + ss + player
}








//          document.forms[0].submit();






          // hide icons to allow tick etc.
          document.getElementById('limg').style.visibility = "hidden";
          document.getElementById('rimg').style.visibility = "hidden";
          document.getElementById('mimgl').style.visibility = "hidden";
          document.getElementById('mimgr').style.visibility = "hidden";
          // hide button
    //      var slideSource = document.getElementById('submitwrapper');
         
        
        
        
        
        
        
        
        
         
         
          document.getElementById("submitwrapper").style.visibility = "visible";
        
        
        
        
        
        
        
         
         
         
         
     //    slideSource.classList.toggle('fade');











          // allow some time for submit then give a completion message
          // keep user interested by changing colors ???

          // show sending icon
          //setTimeout(function() {

          if (document.getElementById("setup").style.backgroundColor == "black") {
            document.getElementById('submitwrapper').style.borderColor = "black";
            document.getElementById('submitwrapper').style.background = "black";
          } else {
            document.getElementById('submitwrapper').style.borderColor = "darkSlateGray";
            document.getElementById('submitwrapper').style.background = "darkSlateGray";
          }
          
          
          
          
          
          document.getElementById('submittxt').innerText = "";
          // show empty text which is placeholder for image
  //        slideSource.classList.toggle('fade');

          document.getElementById('submittxt').innerHTML =
            '<img src="uploada.png" style="height: 100px; width: 100px;">'
            //}, 500);

          setTimeout(function() {
            document.getElementById('submittxt').innerHTML =
              '<img src="tick1.png" style="height: 100px; width: 100px;">'
          }, 6500);

          // return to main menu
          setTimeout(function() {
            window.location.assign("winter2023.html");
          }, 7500);
        }
      }
    }
    // + button for HCP
    function incrementHcp(id) {
      incScore = document.getElementById(id).innerText;
      //	if(incScore.indexOf("hcp") > -1) {
      if (incScore == "hcp" || incScore == "") {
        document.getElementById(id).style.fontSize = "50px";
        document.getElementById(id).style.paddingTop = 0;
        incScore = 0;
      }
      document.getElementById(id).innerText = ++incScore;
      hcp = incScore;
      //=====LocalStorage.hcp=====
      localStorage.hcp = hcp;
      //==========================
      recalcScores();
    }
    // + button for hole scores
    function incrementScore(id) {
      incScore = document.getElementById(id).innerText;
      if (incScore.indexOf("hole") > -1) {
        document.getElementById(id).style.fontSize = "50px";
        document.getElementById(id).style.paddingTop = 0;
        incScore = 0;
      }
      document.getElementById(id).innerText = ++incScore;
      document.getElementById(id.replace("numscore", "h")).innerText = incScore;
      //console.log("course from increment = " + course)
      //console.log("course from localstorage = " + localStorage.course)
      if (course == "Lakes") {
        par = arrLakes[id.replace("numscore", "")][1];
        si = arrLakes[id.replace("numscore", "")][2];
      } else {
        par = arrDawson[id.replace("numscore", "")][1];
        si = arrDawson[id.replace("numscore", "")][2];
      }
      document.getElementById(id.replace("numscore", "p")).innerText = pointsCalc(hcp, par, si, incScore);
      totalScore();
      // update local storage
      //=====LocalStorage.holes===========================================
      localStorage.setItem("hole" + id.replace("numscore", ""), incScore);
      //==================================================================
    }
    // - button for HCP
    function decrementHcp(id) {
      incScore = document.getElementById(id).innerText;
      // if already at 0 say what it is
      if (incScore == 0) {
        document.getElementById(id).style.fontSize = "15px";
        document.getElementById(id).style.paddingTop = "20px";
        holenum = id.replace("numscore", "");
        document.getElementById(id).innerText = "hcp";
      } else {
        if (incScore.indexOf("hcp") > -1) {
          document.getElementById(id).style.fontSize = "50px";
          document.getElementById(id).style.paddingTop = 0;
          incScore = 0;
        }
        if (incScore > 0) {
          --incScore;
        }
        document.getElementById(id).innerText = incScore;
      }
      hcp = incScore;
      //=====LocalStorage.hcp=====
      localStorage.hcp = hcp;
      //==========================
      recalcScores();
    }
    // - button for scores
    function decrementScore(id) {
      incScore = document.getElementById(id).innerText;
      // if already at 0 say what hole it is
      if (incScore == 0) {
        document.getElementById(id).style.fontSize = "15px";
        document.getElementById(id).style.paddingTop = "20px";
        holenum = id.replace("numscore", "");
        document.getElementById(id).innerText = "hole " + holenum;
      } else {
        if (incScore.indexOf("hole") > -1) {
          document.getElementById(id).style.fontSize = "50px";
          document.getElementById(id).style.paddingTop = 0;
          incScore = 0;
        }
        if (incScore > 0) {
          --incScore;
        }
        document.getElementById(id).innerText = incScore;
        document.getElementById(id.replace("numscore", "h")).innerText = incScore;
        if (course == "Lakes") {
          par = arrLakes[id.replace("numscore", "")][1];
          si = arrLakes[id.replace("numscore", "")][2];
        } else {
          par = arrDawson[id.replace("numscore", "")][1];
          si = arrDawson[id.replace("numscore", "")][2];
        }
        document.getElementById(id.replace("numscore", "p")).innerText = pointsCalc(hcp, par, si, incScore);
      }
      totalScore();
      // update local storage
      // if incScore = "hole 1" etc., remove key from localStorage
      if (document.getElementById(id).innerText.indexOf("hole") > -1) {
        localStorage.removeItem("hole" + id.replace("numscore", ""));
      } else {
        //=====LocalStorage.holes===========================================
        localStorage.setItem("hole" + id.replace("numscore", ""), incScore);
        //==================================================================
      }
    }
    // calculated additional totals, countback etc.
    function totalScore() {
      var ih = 0;
      var ip = 0;
      var c6 = 0;
      var c3 = 0;
      var c1 = 0;
      var cb = 0;
      var jh = 0;
      var jp = 0;
      for (i = 1; i <= 9; i++) {
        ih += parseInt(document.getElementById("h" + i).innerText);
        ip += parseInt(document.getElementById("p" + i).innerText);
      }
      for (j = 10; j <= 18; j++) {
        jh += parseInt(document.getElementById("h" + j).innerText);
        jp += parseInt(document.getElementById("p" + j).innerText);
        if (j >= 13) {
          c6 = c6 + parseInt(document.getElementById("p" + j).innerText);
        }
        if (j >= 16) {
          c3 = c3 + parseInt(document.getElementById("p" + j).innerText);
        }
        if (j == 18) {
          c1 = parseInt(document.getElementById("p" + j).innerText);
        }
      }
      document.getElementById("hfront").innerText = ih;
      document.getElementById("hback").innerText = jh;
      document.getElementById("pfront").innerText = ip;
      document.getElementById("pback").innerText = jp;
      document.getElementById("htotal").innerText = ih + jh;
      document.getElementById("ptotal").innerText = ip + jp;
      cb = "9=" + jp + ", 6=" + c6 + ", 3=" + c3 + ", 1=" + c1;
      document.getElementById("cback").innerText = cb;
    }
    // conbert scores to stableford points
    function pointsCalc(hcp, par, si, score) {
      allowance = 0;
      if (score == 0) {
        return 0;
      } else {
        // allowance   
        if (hcp >= si) {
          allowance = 1;
        }
        if (hcp >= (18 + si)) {
          allowance = 2;
        }
        if (hcp >= (36 + si)) {
          allowance = 3;
        }
        // points
        var points = (par + allowance + 2) - score;
        // remove negative numbers
        if (points < 0) {
          points = 0;
        }
        //console.log("score = " + score)
        //console.log("si = " + si)
        //console.log("par = " + par)
        //console.log("hcp = " + hcp)
        return points;
      }
    }
    // papaparse uses HTML5's filereader API to get csv file
    function doGetHCP() {
      // show hcp and controls on screen
      document.getElementById("hcpwrapper").style.visibility = "visible";
      // changed to change hcp on any player change
      //		if(document.getElementById("numhcp").innerText == "?") {
      document.getElementById("numhcp").innerHTML = '<img src="eyewhitegrayflash.png" width=50 height=48>'
      document.getElementById("numhcp").style.paddingTop = "5px";
      document.getElementById("numhcp").style.paddingBottom = "5px";
      var public_hcp_url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR5UUmQIocKfgsPnXGZZW-kBqNNEgOIm8r4Wdn9wOWqAXHht-1iZCPSDcalB0bhAIUUR5Me7fBufma_/pub?gid=836261355&single=true&output=csv";
      strng2 = "?";
      try {
        // if it fails after 20 seconds, put up error message
        setTimeout(function() {
          if (!(Math.trunc(strng2) > 0)) {
            showMessageRetryHCPFailed();
          }
        }, 20000);
        Papa.parse(public_hcp_url, {
          download: true,
          header: true,
          step: function(results, parser) {
            if (results.data.player.indexOf(player) > -1) {
              strng2 = results.data.hcp;
              //console.log("Row data:", results.data.player);
              //console.log("Row data:", results.data.hcp);
              parser.abort;
            }
          },
          complete: function() {
            //console.log("completed");
            if (Math.trunc(strng2) > 0) {
              document.getElementById("numhcp").innerHTML = "";
              document.getElementById("numhcp").style.fontSize = "50px";
              document.getElementById("numhcp").style.paddingTop = 0;
              document.getElementById("numhcp").style.paddingBottom = 0;
              document.getElementById("numhcp").innerText = Math.trunc(strng2);
              // update global hcp
              hcp = Math.trunc(strng2);
              //=====LocalStorage.hcp=====
              localStorage.hcp = hcp;
              //==========================
              // recalc scores to cope with any new lookup
              recalcScores();
            }
          }
        });
      } // end try
      catch (err) {
        console.log(err.message);
        //console.log("bryan error");
      }

      //		} // if ended

      // change to swipe icon
      document.getElementById("swiperight").innerHTML = '<img src="swiperightflash.png" alt="swipe" style="position: absolute; top: 6vh; right: 3vw; height: 85px; width: 85px;">';
    }
    // redo score/points calculations for 18 holes
    function recalcScores() {
      for (i = 1; i <= 18; i++) {
        tempscore = document.getElementById("numscore" + i).innerText;
        if (tempscore.indexOf("hole") > -1) {
          tempscore = "0";
        }
        if (course == "Lakes") {
          temppar = arrLakes[i][1];
          tempsi = arrLakes[i][2];
        } else {
          temppar = arrDawson[i][1];
          tempsi = arrDawson[i][2];
        }
        temppoints = pointsCalc(hcp, temppar, tempsi, tempscore);
        document.getElementById("h" + i).innerText = tempscore;
        document.getElementById("p" + i).innerText = temppoints;
      }
      totalScore();
    }
    // switches to and from a high contrast mode
    function togglecontrast() {
      // toggle between normal and high contrast
      if (document.getElementById("plusscore1").style.color == "yellow") {
        // put back to normal
        for (i = 1; i <= 18; i++) {
          document.getElementById("plusscore" + i).style.color = "white";
          document.getElementById("plusscore" + i).style.fontWeight = "400";
          document.getElementById("minusscore" + i).style.color = "white";
          document.getElementById("minusscore" + i).style.fontWeight = "400";
          document.getElementById("numscore" + i).style.color = "white";
          document.getElementById("numscore" + i).style.fontWeight = "400";
          document.getElementById("tr" + i).style.background = "dodgerBlue";
        }
        document.getElementById("submitwrapper").style.background = "dodgerBlue";
        document.getElementById("submitwrapper").style.color = "white";
        document.getElementById("submitwrapper").style.fontWeight = "400";
        document.getElementById("dropbtn").style.background = "dodgerBlue";
        document.getElementById("dropbtn").style.color = "white";
        document.getElementById("dropbtn").style.fontWeight = "400";
        document.getElementById("numhcp").style.background = "dodgerBlue";
        document.getElementById("numhcp").style.color = "white";
        document.getElementById("numhcp").style.fontWeight = "400";
        document.getElementById("plushcpx").style.background = "dodgerBlue";
        document.getElementById("plushcpx").style.color = "white";
        document.getElementById("plushcpx").style.fontWeight = "400";
        document.getElementById("minushcpx").style.background = "dodgerBlue";
        document.getElementById("minushcpx").style.color = "white";
        document.getElementById("minushcpx").style.fontWeight = "400";
        document.getElementById("trhcp").style.background = "dodgerBlue";
        document.getElementById("setup").style.backgroundColor = "darkSlateGray";
      } else {
        // put into high contrast
        for (i = 1; i <= 18; i++) {
          document.getElementById("plusscore" + i).style.color = "yellow";
          document.getElementById("plusscore" + i).style.fontWeight = "700";
          document.getElementById("minusscore" + i).style.color = "yellow";
          document.getElementById("minusscore" + i).style.fontWeight = "700";
          document.getElementById("numscore" + i).style.color = "yellow";
          document.getElementById("numscore" + i).style.fontWeight = "700";
          document.getElementById("tr" + i).style.background = "midnightBlue";
        }
        document.getElementById("submitwrapper").style.background = "midnightBlue";
        document.getElementById("submitwrapper").style.color = "yellow";
        document.getElementById("submitwrapper").style.fontWeight = "700";
        document.getElementById("dropbtn").style.background = "midnightBlue";
        document.getElementById("dropbtn").style.color = "yellow";
        document.getElementById("dropbtn").style.fontWeight = "700";
        document.getElementById("numhcp").style.background = "midnightBlue";
        document.getElementById("numhcp").style.color = "yellow";
        document.getElementById("numhcp").style.fontWeight = "700";
        document.getElementById("plushcpx").style.background = "midnightBlue";
        document.getElementById("plushcpx").style.color = "yellow";
        document.getElementById("plushcpx").style.fontWeight = "700";
        document.getElementById("minushcpx").style.background = "midnightBlue";
        document.getElementById("minushcpx").style.color = "yellow";
        document.getElementById("minushcpx").style.fontWeight = "700";
        document.getElementById("trhcp").style.background = "midnightBlue";
        document.getElementById("setup").style.backgroundColor = "black";
      }
    }
    // retrieves locally saved temp data to allow integrity over refreshes
    function recoverFromLocalStorage() {
      // put other values back
      // player
      if (("player") in localStorage) {
        document.getElementById("dropbtn").innerText = localStorage.getItem("player");
      } else {
        document.getElementById("dropbtn").innerText = "select player";
      }
      player = document.getElementById("dropbtn").innerText;
      // hcp
      if (("hcp") in localStorage) {
        document.getElementById("numhcp").innerText = localStorage.getItem("hcp");
        document.getElementById("numhcp").style.fontSize = "50px";
        document.getElementById("numhcp").style.paddingTop = 0;
        // make hcp visible
        document.getElementById("hcpwrapper").style.visibility = "visible";
        // make submit visible
        document.getElementById("submitwrapper").style.visibility = "visible";
      } else {
        document.getElementById("numhcp").innerText = "?";
        //document.getElementById("numhcp").style.fontSize = "15px";
        //document.getElementById("numhcp").style.paddingTop = "20px";
      }
      hcp = document.getElementById("numhcp").innerText;
      if ("comp" in localStorage) {
        //=====LocalStorage.comp============
        comp = localStorage.getItem("comp");
        //==================================
      }
      if ("course" in localStorage) {
        //=====LocalStorage.course==============
        course = localStorage.getItem("course");
        //======================================
      }
      //	recalc points etc.
      for (var i = 1; i <= 18; i++) {
        // put values for holes back
        if (("hole" + i) in localStorage) {
          document.getElementById("numscore" + i).innerText = localStorage.getItem("hole" + i);
          document.getElementById("numscore" + i).style.fontSize = "50px";
          document.getElementById("numscore" + i).style.paddingTop = 0;
          document.getElementById("h" + i).innerText = localStorage.getItem("hole" + i);
        } else {
          // change to hole1 etc and change font size
          document.getElementById("h" + i).innerText = "0";
          document.getElementById("numscore" + i).innerText = "hole " + i;
          document.getElementById("numscore" + i).style.fontSize = "15px";
          document.getElementById("numscore" + i).style.paddingTop = "20px";
        }
      }
      for (var i = 1; i <= 18; i++) {
        // calc points
        if (course == "Lakes") {
          par = arrLakes[i][1];
          si = arrLakes[i][2];
        } else {
          par = arrDawson[i][1];
          si = arrDawson[i][2];
        }
        if (("hole" + i) in localStorage) {
          document.getElementById("p" + i).innerText = pointsCalc(hcp, par, si, localStorage.getItem("hole" + i));
        } else {
          document.getElementById("p" + i).innerText = "0";
        }
      }
      totalScore();
    }
    // wipe local storage but not menu items
    function clearCache() {
      localStorage.removeItem("player");
      localStorage.removeItem("hcp");
      localStorage.removeItem("comp");
      localStorage.removeItem("course");
      for (var i = 1; i <= 18; i++) {
        localStorage.removeItem("hole" + i);
      }
      recoverFromLocalStorage();
      location.reload();
    }
    // set up Lakes as non competition day course
    function doSomethingLakes() {
      course = "Lakes";
      comp = course + " " + dateToday;
      document.getElementById("id_confrmdiv").style.display = "none";
      localStorage.course = course;
      localStorage.comp = comp;
    }
    // set up Dawson as non competition day course
    function doSomethingDawson() {
      course = "Dawson";
      comp = course + " " + dateToday;
      document.getElementById("id_confrmdiv").style.display = "none";
      localStorage.course = course;
      localStorage.comp = comp;
    }
    // message saying what competition is being processed
    function showCompMessage() {
      if (compday == "yes") {
        document.getElementById("id_confrmdiv").innerText = "\nScoring for " + comp + "\ncompetition\n\n";
      } else {
        document.getElementById("id_confrmdiv").innerText = "\nScoring for " + comp + "\n(no competition)\n\n";
      }
      document.getElementById("id_confrmdiv").style.display = "block";
      setTimeout(function() {
        document.getElementById("id_confrmdiv").innerText = "";
        document.getElementById("id_confrmdiv").style.display = "none";
      }, 3000);
    }
    // message for non competition day denying submit
    function showNoSubmitMessage() {
      document.getElementById("id_confrmdiv").innerText = "\nSubmit for " + comp + "\n(no competition) is disabled.\n\n";
      document.getElementById("id_confrmdiv").style.display = "block";
      setTimeout(function() {
        document.getElementById("id_confrmdiv").innerText = "";
        document.getElementById("id_confrmdiv").style.display = "none";
      }, 3000);
    }
    // nessage not allowing submit because data is incomplete
    function showIncompleteSubmitData(msg) {
      document.getElementById("id_confrmdiv").innerText = "\nSubmit for " + comp + "\nfailed - incomplete data.\n" + msg + "\n\n";
      document.getElementById("id_confrmdiv").style.display = "block";
      setTimeout(function() {
        document.getElementById("id_confrmdiv").innerText = "";
        document.getElementById("id_confrmdiv").style.display = "none";
      }, 3000);
    }
    // message saying HCP lookup failed
    function showMessageRetryHCP() {
      document.getElementById("id_confrmdiv").innerText = "\nHCP lookup failed - retrying ...\n\n";
      document.getElementById("id_confrmdiv").style.display = "block";
      setTimeout(function() {
        document.getElementById("id_confrmdiv").innerText = "";
        document.getElementById("id_confrmdiv").style.display = "none";
        // put back hcp
        document.getElementById("numhcp").innerHTML = "";
        document.getElementById("numhcp").innerText = "?";
        //		document.getElementById("numhcp").style.fontSize = "15px";
        //		document.getElementById("numhcp").style.paddingTop = "20px";
      }, 3000);
    }
    // message saying HCP lookup failed
    function showMessageRetryHCPFailed() {
      document.getElementById("id_confrmdiv").innerText = "\nHCP lookup failed.\n\n" + "check the network and try again.\n\n";
      document.getElementById("id_confrmdiv").style.display = "block";
      setTimeout(function() {
        document.getElementById("id_confrmdiv").innerText = "";
        document.getElementById("id_confrmdiv").style.display = "none";
        // put back hcp
        document.getElementById("numhcp").innerHTML = "";
        document.getElementById("numhcp").innerText = "?";
        //document.getElementById("numhcp").style.fontSize = "15px";
        //document.getElementById("numhcp").style.paddingTop = "20px";
      }, 3000);
    }
    // choose course dialog for non competition day
    function showCourseChoice() {
      tempt = '<br /> No competition today. Select which course to use.';
      tempt += '<br /><br />';
      tempt += '<button id="id_lakesbtn" onclick="doSomethingLakes()">Lakes</button>';
      tempt += '<button id="id_dawsonbtn" onclick="doSomethingDawson()">Dawson</button>';
      document.getElementById("id_confrmdiv").innerHTML = tempt;
      //console.log(document.getElementById("id_confrmdiv").innerHTML);
      document.getElementById("id_confrmdiv").style.display = "block";
    }
    // show hole number when hole score pressed
    // show hole number when hole score pressed
    function showHole(id) {
      tempe = document.getElementById(id);
      tempsaved = tempe.innerText;

      // only do it if number is obscuring hole number
      if (tempsaved.indexOf("hole") == -1) {
        // change to hole1 etc and change font size
        tempe.innerText = id.replace("numscore", "hole ");
        tempe.style.fontSize = "15px";
        tempe.style.paddingTop = "20px";
        tempe.style.fontWeight = "bold";
        tempe.style.color = "lime";
        // disable click
        for (var i = 1; i <= 18; i++) {
          document.getElementById("numscore" + i).style.pointerEvents = 'none';
        }

        // put info back
        setTimeout(function() {
          // re-enable click
          for (var i = 1; i <= 18; i++) {
            document.getElementById("numscore" + i).style.pointerEvents = '';
          }
          tempe.style.fontSize = "50px";
          tempe.style.paddingTop = 0;
          tempe.style.fontWeight = "normal";
          tempe.style.color = "white";
          tempe.innerText = tempsaved;
        }, 500);
      }

    }
    // show message when no player has been set
    function showSetPlayerMessage() {
      document.getElementById("id_confrmdiv").innerText = "\nPlayer and HCP have not been set, do this before entering scores.\n\n";
      document.getElementById("id_confrmdiv").style.display = "block";

      // hide submit button
      document.getElementById("submitwrapper").style.visibility = "hidden";

      setTimeout(function() {
        document.getElementById("id_confrmdiv").innerText = "";
        document.getElementById("id_confrmdiv").style.display = "none";
      }, 3000);
    }

    function ccclose() {
      document.getElementById("showcoursecard").style.visibility = "hidden";
    }

    function showcoursecard() {
    // show msg if not available
    abort = "no";
    aborttxt = "\nStrokes unavailable\nbecause:\n\n";

    if (!(hcp > 0)) {
       abort = "yes";
       aborttxt += "\nhcp not found\n"
    }
    if (player == "select player") {
       abort = "yes"
       aborttxt += "\nplayer not found\n"
    }
    if (!(course == "Lakes" || course == "Dawson")) {
       abort = "yes"
       aborttxt += "\ncourse not found\n"
    }
    
    if (abort == "yes") {
    
      document.getElementById("id_confrmdiv").innerText = aborttxt + "\n\n";
      document.getElementById("id_confrmdiv").style.display = "block";

      setTimeout(function() {
        document.getElementById("id_confrmdiv").innerText = "";
        document.getElementById("id_confrmdiv").style.display = "none";
      }, 3500);
    
    } else {
    
      cctxt = ""
      if (course == "Lakes") {
        cctxt = player + ", Lakes, " + hcp + " hcp"
        for (var i = 1; i <= 18; i++) {
             if (hcp >= (arrLakes[i][2] + 18)) {
                 cctxt += '<span class="cyanhole"><b><br>hole ' + arrLakes[i][0] + ", par " + arrLakes[i][1] +
                 ", si " + '<span class="circle2">' + arrLakes[i][2] + "</span></b></span>"
             } else {
                 if (hcp >= arrLakes[i][2]) {
                     cctxt += "<b><br>hole " + arrLakes[i][0] + ", par " + arrLakes[i][1] + ", si " +
                              '<span class="circle1">' + arrLakes[i][2] + "</span></b>"
                 } else {
                     cctxt += '<span class="nocircle1">' + "<br>hole " + arrLakes[i][0] + ", par " + 
                              arrLakes[i][1] + ", si  " + arrLakes[i][2] + "</span>"
                 }
            } 
        }
      }  
      
      if (course == "Dawson") {
        cctxt = player + ", Dawson, " + hcp + " hcp"
        for (var i = 1; i <= 18; i++) {
             if (hcp >= (arrDawson[i][2] + 18)) {
                 cctxt += '<span class="cyanhole"><b><br>hole ' + arrDawson[i][0] + ", par " + arrDawson[i][1] +
                 ", si " + '<span class="circle2">' + arrDawson[i][2] + "</span></b></span>"
             } else {
                 if (hcp >= arrDawson[i][2]) {
                     cctxt += "<b><br>hole " + arrDawson[i][0] + ", par " + arrDawson[i][1] + ", si " +
                              '<span class="circle1">' + arrDawson[i][2] + "</span></b>"
                 } else {
                     cctxt += '<span class="nocircle1">' + "<br>hole " + arrDawson[i][0] + ", par " + 
                              arrDawson[i][1] + ", si  " + arrDawson[i][2] + "</span>"
                 }
            } 
        }
      }
        
     }
      
      cctxt += "<br>"    
      cctxt += "<br> . . . tap to close."
      cctxt += "<br><br><br><br>"
      
      document.getElementById("showcoursecard").innerHTML = cctxt;
      document.getElementById("showcoursecard").style.visibility = "visible";
    }










 function rclose() {
      document.getElementById("showrules").style.visibility = "hidden";
    }



 function showrules() {
 
 const d = new Date();
 var month = d.getMonth();
 //rules from email 25th September
var rulestxt = '<span class="cyanhole"><b>From Oct 1st to Oct 31st inclusive</b><br></b></span>' 
rulestxt += '<br>'
rulestxt += '1. Preferred lies on Fairway and Fringes of Greens (Mark your ball, lift clean and place within 6 inches. No nearer the hole)<br><br>'
rulestxt += '2. Semi Rough (Mark your ball, lift Clean and Replace)<br><br>'
rulestxt += '3. Rough (Play the ball as it lies)<br><br>'
rulestxt += '4. Casual Water (Nearest point of relief no nearer the hole) 1 club length from that point, drop the ball. If your ball is in the rough and in casual water, nearest point of relief no nearer the hole, one club length from that point, drop the ball. The ball may be cleaned if taking relief from casual water in the rough.<br><br>'

rulestxt += '<span class="cyanhole"><b>November 1st to 31st March 2024</b><br></b></span>' 
rulestxt += '<br>'

rulestxt += 'As above with additions'
rulestxt += '<br><br>'
rulestxt += "1. The Seniors Section will be keeping all Par 5's as Par 5's."
rulestxt += '<br><br>'
rulestxt += "2. Bounce boards, mats and tees may be used on Fairways and Fringes of Greens. These are not to be used in 'Semi Rough' or 'Rough Areas'."
rulestxt += '<br><br>'
rulestxt += '3. Semi rough will be lift clean and replace. Rough will be (play as it lies)'
rulestxt += '<br><br>'
rulestxt += '4. Drivers are not to be used on bounce boards, mats or tees after the initial tee shot, they can, however, be used from the grass.'
rulestxt += '<br><br>'
rulestxt += "5. Bunkers will be 'pick rake and place' Unless otherwise stated on the whiteboard at registration."
   
  
rulestxt += "<br><br>"    
rulestxt += "<br> . . . tap to close."
rulestxt += "<br><br><br><br>"
    
document.getElementById("showrules").innerHTML = rulestxt;
document.getElementById("showrules").style.visibility = "visible";
 
}


  </script>
</body>

</html>
