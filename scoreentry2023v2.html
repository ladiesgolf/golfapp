<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="ie=edge" http-equiv="X-UA-Compatible">
  <meta name="theme-color" content="rgb(0,0,20)">
  <title>winter 2023</title>
  <link href='https://fonts.googleapis.com/css?family=Kalam' rel='stylesheet'>
  <meta content="score input" name="description">
  <meta content="Bryan M" name="author">
  <link href="wintericon.png" rel="icon" type="image/x-icon">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* hide all scrollbars when not using PC */

    /* Hide scrollbar for Chrome, Safari and Opera */
    /* *::-webkit-scrollbar { */
    /*  display: none;          */
    /*  } */

    /* Hide scrollbar for IE, Edge and Firefox */
    /*  * { */
    /*  -ms-overflow-style: none;   IE and Edge */
    /*  scrollbar-width: none;   Firefox */
    /*  } */

    body {
      font-family: Arial, Helvetica, sans-serif;
      background: rgb(0, 0, 20);
      padding-left: 0;
      padding-right: 0;
      overflow-x: hidden;
      overflow-y: auto;
      font-weight: 400;
    }

    .three-page-container {
      display: grid;
      grid-template-columns: repeat(3, 100%);
      align-content: center;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
    }

    .wrapper {
      display: grid;
      grid-template-columns: repeat(6, [col] auto);
      background-color: rgb(0, 0, 20);
      color: white;
      height: 100vmax;
      align-items: center;
      justify-items: center;
      scroll-snap-align: start;
      scroll-snap-stop: always;
      font-size: 3vmax;
    }

    .xxxbox {
      background-color: black;
      color: white;
    }

    .r1c1left {
      place-items: center;
    }

    .r1c1to6 {
      grid-column: 1 / 7;
      place-items: center;
    }

    .r1c1to2 {
      grid-column: 1 / 3;
      place-items: center;
    }

    .r1c1to3 {
      grid-column: 1 / 4;
      place-items: center;
    }

    .r1c4to5 {
      grid-column: 4 / 6;
      place-items: center;
    }

    .r1c5to6 {
      grid-column: 5 / 7;
      place-items: center;
    }

    .r1c3to4 {
      grid-column: 3 / 5;
      place-items: center;
    }

    .r1c3to6 {
      grid-column: 3 / 7;
      place-items: left;
    }

    /* holes grid */
    .r1c1to2l {
      grid-column: 1 / 3;
      place-items: left;
    }

    .r1c5to6r {
      grid-column: 5 / 7;
      place-items: right;
    }

    .padnumber {
      display: grid;
      place-items: center;
      border-style: none none solid none;
      /* t, r, b, l */
      border-color: rgb(30, 130, 255);
      white-space: nowrap;
    }

    .padplus {
      display: grid;
      place-items: center;
      border-style: none solid solid none;
      /* t, r, b, l */
      border-color: rgb(30, 130, 255);
    }

    .padminus {
      display: grid;
      place-items: center;
      border-style: none none solid solid;
      /* t, r, b, l */
      border-color: rgb(30, 130, 255);
    }

    .hole {
      width: 98vw;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: dodgerBlue;
    }

    .holesinfoout {
      color: lime;
    }

    .holesinfoback {
      color: cyan;
    }

    .holesinfo {
      color: yellow;
    }

    .bar {
      width: 100vw;
      height: 11vmax;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .xxxborder {
      border: 1px white solid;
    }

    #dropbtn {
      font-size: 4.5vmax;
      border-style: solid solid solid solid;
      /* t, r, b, l */
      border-color: rgb(30, 130, 255);
      background: dodgerBlue;
    }
    
    #hcpwrapper,
    #submit {
      border-style: solid solid solid solid;
      /* t, r, b, l */
      border-color: rgb(30, 130, 255);
      background: dodgerBlue;
    }

    .numx {
      padding-left: 7vmax;
      padding-right: 7vmax;
      font-size: 5vmax;
    }

    .footer {
      padding-top: 2vmax;
      padding-bottom: 2vmax;
      justify-content: center;
      align-items: center;
    }

    .wrapperforscoring {
      display: grid;
      /* grid-template-columns: auto auto auto auto auto auto; */
      grid-template-columns: auto 30% auto;
      background-color: dodgerBlue;
      color: white;
      gap: 0px;
      scroll-snap-align: start;
      scroll-snap-stop: always;
      height: 100vmax;
      font-size: 3vmax;
    }

    /* dropdown */

    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f1f1f1;
      min-width: 160px;
      overflow: auto;
      box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
      z-index: 1;
      border-radius: 3px;
      box-shadow: 10px 10px 25px black;
      max-height: 90vh;
    }

    .dropdown-content a {
      color: gray;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    .show {
      display: block;
    }

    /* end of dropdown */

    /* hide forms */
    #my-form,
    #my-response-iframe {
      display: none;
      height: 20px;
      width: 60px;
    }

    /* for icon related pages */

    #showrules {
      visibility: hidden;
      font-family: 'Kalam';
      font-size: 3vmax;
      color: white;
      text-align: left;
      position: fixed;
      z-index: 1;
      padding-top: 10px;
      padding-left: 10px;
      padding-right: 5px;
      padding-bottom: 10px;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: dodgerBlue;
      background-color: rgba(0, 0, 0, 0.7);
    }

    #showcoursecard {
      visibility: hidden;
      font-family: 'Kalam';
      font-size: 3vmax;
      color: white;
      text-align: left;
      position: fixed;
      z-index: 1;
      padding-top: 10px;
      padding-left: 10px;
      padding-right: 5px;
      padding-bottom: 10px;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: dodgerBlue;
      background-color: rgba(0, 0, 0, 0.7);
    }

    .circle1 {
      font-family: 'Kalam';
      border-radius: 50%;
      padding-left: 10px;
      padding-right: 10px;
      background: black;
      border: 3px solid white;
      color: white;
      text-align: center;
      font-size: 16px;
    }

    .circle2 {
      font-family: 'Kalam';
      border-radius: 50%;
      padding-left: 10px;
      padding-right: 10px;
      background: black;
      border: 4px solid cyan;
      color: cyan;
      text-align: center;
      font-size: 16px;
      font-weight: bold;
    }

    .nocircle1 {
      font-family: 'Kalam';
      padding-left: 10px;
      padding-right: 10px;
      color: lightBlue;
      text-align: center;
      font-size: 16px;
    }

    .cyanhole {
      color: cyan;
      font-family: 'Kalam';
    }

    /* popup box related */

    #submit_popuppanel {
      display: none;
      color: white;
      background-color: #eee;
      border-radius: 5px;
      border: 1px solid #aaa;
      position: fixed;
      width: 90vw;
      margin-left: 5vw;
      margin-top: 20vh;
      padding: 10px 10px 10px;
      /* t lr b */
      box-sizing: border-box;
      text-align: center;
    }

    #popuppanel {
      display: none;
      color: black;
      background-color: #eee;
      border-radius: 5px;
      border: 1px solid #aaa;
      position: fixed;
      height: fit-content;
      width: 80%;
      padding: 6px; // 8px 8px;
      box-sizing: border-box;
      text-align: center;
      left: 10%;
      top: 10%;
      font-size: 2vmax;
    }

    #popuppanel button,
    #submit_popuppanel button {
      background-color: #ccc;
      display: inline-block;
      border-radius: 3px;
      border: 1px solid #aaa;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      font-size: 2vmax;
    }

    #popuppanel .button:hover {
      background-color: #ddd;
    }

    #submit {
      font-size: 5vmax;
    }
       
  </style>

</head>

<body>
  <div class="three-page-container">

    <div class="wrapper">
      <div class="box r1c1to6">
        <div onclick="toggleDropdown();" class="dropbtn bar" id="dropbtn">select player</div>
        <div id="playersDropdown" class="dropdown-content"> </div>
        
      </div>

      <div class="box holesinfoout">hole</div>
      <div class="box holesinfoout">score</div>
      <div class="box holesinfoout">points</div>
      <div class="box holesinfoback">hole</div>
      <div class="box holesinfoback">score</div>
      <div class="box holesinfoback">points</div>

      <div class="box holesinfoout">1</div>
      <div class="box holesinfoout" id="h1">0</div>
      <div class="box holesinfoout" id="p1">0</div>
      <div class="box holesinfoback">10</div>
      <div class="box holesinfoback" id="h10">0</div>
      <div class="box holesinfoback" id="p10">0</div>

      <div class="box holesinfoout">2</div>
      <div class="box holesinfoout" id="h2">0</div>
      <div class="box holesinfoout" id="p2">0</div>
      <div class="box holesinfoback">11</div>
      <div class="box holesinfoback" id="h11">0</div>
      <div class="box holesinfoback" id="p11">0</div>

      <div class="box holesinfoout">3</div>
      <div class="box holesinfoout" id="h3">0</div>
      <div class="box holesinfoout" id="p3">0</div>
      <div class="box holesinfoback">12</div>
      <div class="box holesinfoback" id="h12">0</div>
      <div class="box holesinfoback" id="p12">0</div>

      <div class="box holesinfoout">4</div>
      <div class="box holesinfoout" id="h4">0</div>
      <div class="box holesinfoout" id="p4">0</div>
      <div class="box holesinfoback">13</div>
      <div class="box holesinfoback" id="h13">0</div>
      <div class="box holesinfoback" id="p13">0</div>

      <div class="box holesinfoout">5</div>
      <div class="box holesinfoout" id="h5">0</div>
      <div class="box holesinfoout" id="p5">0</div>
      <div class="box holesinfoback">14</div>
      <div class="box holesinfoback" id="h14">0</div>
      <div class="box holesinfoback" id="p14">0</div>

      <div class="box holesinfoout">6</div>
      <div class="box holesinfoout" id="h6">0</div>
      <div class="box holesinfoout" id="p6">0</div>
      <div class="box holesinfoback">15</div>
      <div class="box holesinfoback" id="h15">0</div>
      <div class="box holesinfoback" id="p15">0</div>

      <div class="box holesinfoout">7</div>
      <div class="box holesinfoout" id="h7">0</div>
      <div class="box holesinfoout" id="p7">0</div>
      <div class="box holesinfoback">16</div>
      <div class="box holesinfoback" id="h16">0</div>
      <div class="box holesinfoback" id="p16">0</div>

      <div class="box holesinfoout">8</div>
      <div class="box holesinfoout" id="h8">0</div>
      <div class="box holesinfoout" id="p8">0</div>
      <div class="box holesinfoback">17</div>
      <div class="box holesinfoback" id="h17">0</div>
      <div class="box holesinfoback" id="p17">0</div>

      <div class="box holesinfoout">9</div>
      <div class="box holesinfoout" id="h9">0</div>
      <div class="box holesinfoout" id="p9">0</div>
      <div class="box holesinfoback">18</div>
      <div class="box holesinfoback" id="h18">0</div>
      <div class="box holesinfoback" id="p18">0</div>

      <div class="box holesinfoout">front</div>
      <div class="box holesinfoout" id="hfront">0</div>
      <div class="box holesinfoout" id="pfront">0</div>
      <div class="box holesinfoback">back</div>
      <div class="box holesinfoback" id="hback">0</div>
      <div class="box holesinfoback" id="pback">0</div>

      <div class="box r1c1to2 holesinfo">total score</div>
      <div class="box holesinfo" id="htotal">0</div>

      <div class="box r1c4to5 holesinfo">total points</div>
      <div class="box holesinfo" id="ptotal">0</div>

      <div class="box r1c1to2 holesinfo">countback</div>
      <div class="box r1c3to6 holesinfo" id="cback">0</div>
      <div class="box holesinfo"></div>
      <div class="box holesinfo"></div>
      <div class="box holesinfo"></div>

      <div class="box r1c1to6 bar" id="hcpwrapper">
        <span class="minusx" id="minushcpx">playing</span>
        <span class="numx" id="numhcp">?</span>
        <span class="plusx" id="plushcpx">handicap</span>
      </div>

      <div class="box r1c1to6 bar" id="submit" onclick="submitForm()">submit</div>

      <div class="r1c1to2 footer" id="limg">
        <img src="resetwhite.png" alt="cache" onclick="clearCache()" style="height: 40px; width: 40px;">
      </div>

      <div class="r1c3 footer" id="mimgl">
        <img src="documents-icon.png" alt="strokes" onclick="showcoursecard()" style="height: 40px; width: 40px;">
      </div>

      <div class="r1c4 footer" id="mimgr">
        <img src="ruleswhite.png" alt="rules" onclick="showrules()" style="height: 40px; width: 40px;">
      </div>

      <div class="r1c5to6 footer" id="rimg">
        <img src="contrastwhite.png" alt="contrast" onclick="togglecontrast()" style="height: 40px; width: 40px;">
      </div>

      <div class="demo">
        <!-- coursecard strokes and rules -->
        <div class="showcoursecard" id="showcoursecard" onclick="ccclose()"></div>
        <div class="showrules" id="showrules" onclick="rclose()"></div>

      </div>
      <div id="popuppanel"></div>

    </div>

    <!-- score input pages -->

    <div class="wrapperforscoring" id="scoringfront9">

      <div class="padminus" onclick='decrementScore("numscore1")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore1" onclick="showHole(this.id)">hole 1</div>
      <div class="padplus" onclick='incrementScore("numscore1")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore2")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore2" onclick="showHole(this.id)">hole 2</div>
      <div class="padplus" onclick='incrementScore("numscore2")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore3")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore3" onclick="showHole(this.id)">hole 3</div>
      <div class="padplus" onclick='incrementScore("numscore3")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore4")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore4" onclick="showHole(this.id)">hole 4</div>
      <div class="padplus" onclick='incrementScore("numscore4")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore5")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore5" onclick="showHole(this.id)">hole 5</div>
      <div class="padplus" onclick='incrementScore("numscore5")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore6")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore6" onclick="showHole(this.id)">hole 6</div>
      <div class="padplus" onclick='incrementScore("numscore6")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore7")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore7" onclick="showHole(this.id)">hole 7</div>
      <div class="padplus" onclick='incrementScore("numscore7")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore8")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore8" onclick="showHole(this.id)">hole 8</div>
      <div class="padplus" onclick='incrementScore("numscore8")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore9")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore9" onclick="showHole(this.id)">hole 9</div>
      <div class="padplus" onclick='incrementScore("numscore9")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

    </div>

    <div class="wrapperforscoring" id="scoringback9">

      <div class="padminus" onclick='decrementScore("numscore10")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore10" onclick="showHole(this.id)">hole 10</div>
      <div class="padplus" onclick='incrementScore("numscore10")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore11")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore11" onclick="showHole(this.id)">hole 11</div>
      <div class="padplus" onclick='incrementScore("numscore11")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore12")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore12" onclick="showHole(this.id)">hole 12</div>
      <div class="padplus" onclick='incrementScore("numscore12")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore13")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore13" onclick="showHole(this.id)">hole 13</div>
      <div class="padplus" onclick='incrementScore("numscore13")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore14")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore14" onclick="showHole(this.id)">hole 14</div>
      <div class="padplus" onclick='incrementScore("numscore14")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore15")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore15" onclick="showHole(this.id)">hole 15</div>
      <div class="padplus" onclick='incrementScore("numscore15")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore16")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore16" onclick="showHole(this.id)">hole 16</div>
      <div class="padplus" onclick='incrementScore("numscore16")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore17")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore17" onclick="showHole(this.id)">hole 17</div>
      <div class="padplus" onclick='incrementScore("numscore17")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

      <div class="padminus" onclick='decrementScore("numscore18")'>
        <img src="minusw.png" alt="-" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>
      <div class="padnumber" id="numscore18" onclick="showHole(this.id)">hole 18</div>
      <div class="padplus" onclick='incrementScore("numscore18")'>
        <img src="plusw.png" alt="+" style="height: 40px; width: 40px; opacity: 0.6;">
      </div>

    </div>

  </div>

  <!-- form to construct data prior to submit -->
  <form action="https://docs.google.com/forms/d/e/1FAIpQLSfz7JwsoPVvFYEiZqlH2IS3YOw7OuT9hQEdN1O8zfLXWtU4sw/formResponse"
    id="my-form" method="post" name="my-form" target="my-response-iframe">
    <!-- name, hcp, course -->
    <input id='mx474474348' name='entry.474474348' type='text' value='default'>
    <input id='mx2131369517' name='entry.2131369517' type='text' value='default'>
    <input id='mx477101370' name='entry.477101370' type='text' value='default'>
    <input id='mx1980297491' name='entry.1980297491' type='text' value='default'>
    <input id='mx463832232' name='entry.463832232' type='text' value='default'>
    <input id='mx205704642' name='entry.205704642' type='text' value='default'>
    <input id='mx278278589' name='entry.278278589' type='text' value='default'>
    <input id='mx949547387' name='entry.949547387' type='text' value='default'>
    <input id='mx703011397' name='entry.703011397' type='text' value='default'>
    <input id='mx1460583253' name='entry.1460583253' type='text' value='default'>
    <input id='mx462940045' name='entry.462940045' type='text' value='default'>
    <input id='mx477691508' name='entry.477691508' type='text' value='default'>
    <input id='mx413249407' name='entry.413249407' type='text' value='default'>
    <input id='mx108900453' name='entry.108900453' type='text' value='default'>
    <input id='mx1841236411' name='entry.1841236411' type='text' value='default'>
    <input id='mx1864644918' name='entry.1864644918' type='text' value='default'>
    <input id='mx1538428689' name='entry.1538428689' type='text' value='default'>
    <input id='mx1449918213' name='entry.1449918213' type='text' value='default'>
    <input id='mx38761817' name='entry.38761817' type='text' value='default'>
    <input id='mx247392471' name='entry.247392471' type='text' value='default'>
    <input id='mx741809181' name='entry.741809181' type='text' value='default'>
    <input id='mx1362729237' name='entry.1362729237' type='text' value='default'>
    <input id='mx1372983908' name='entry.1372983908' type='text' value='default'>
    <input id='mx2002196917' name='entry.2002196917' type='text' value='default'>
    <input id='mx640802794' name='entry.640802794' type='text' value='default'>
    <input id='mx2076656246' name='entry.2076656246' type='text' value='default'>
    <input id='mx486346919' name='entry.486346919' type='text' value='default'>
    <input id='mx1918313229' name='entry.1918313229' type='text' value='default'>
    <input id='mx638821' name='entry.638821' type='text' value='default'>
    <input id='mx737099688' name='entry.737099688' type='text' value='default'>
    <input id='mx488827232' name='entry.488827232' type='text' value='default'>
    <input id='mx1203421487' name='entry.1203421487' type='text' value='default'>
    <input id='mx979421831' name='entry.979421831' type='text' value='default'>
    <input id='mx929858153' name='entry.929858153' type='text' value='default'>
    <input id='mx1330487443' name='entry.1330487443' type='text' value='default'>
    <input id='mx940496448' name='entry.940496448' type='text' value='default'>
    <input id='mx1127168348' name='entry.1127168348' type='text' value='default'>
    <input id='mx638332104' name='entry.638332104' type='text' value='default'>
    <input id='mx1626319908' name='entry.1626319908' type='text' value='default'>
    <input id='mx362674948' name='entry.362674948' type='text' value='default'>
    <input id='mx544180710' name='entry.544180710' type='text' value='default'>
    <input id='mx893562950' name='entry.893562950' type='text' value='default'>
    <input id='mx335596501' name='entry.335596501' type='text' value='default'>
    <input id='mx1453506389' name='entry.1453506389' type='text' value='default'>
    <input id='mx1045870519' name='entry.1045870519' type='text' value='default'>
    <input id='mx683300283' name='entry.683300283' type='text' value='default'>
    <input id='mx967906330' name='entry.967906330' type='text' value='default'>
    <input id='mx789190149' name='entry.789190149' type='text' value='default'>
    <input type="submit">
  </form>
  <!-- google iframe inserted here - invisible -->
  <iframe height="20" id="my-response-iframe" name="my-response-iframe"
    src="https://docs.google.com/forms/d/e/1FAIpQLSfz7JwsoPVvFYEiZqlH2IS3YOw7OuT9hQEdN1O8zfLXWtU4sw/viewform?embedded=true"
    width="60"></iframe>

  <script>
    //===========================
    // this code runs at startup
    //===========================

    // declare global variables
    var hcp = "0";
    var player = "select player";
    var comp;
    var compday = "no";
    var course = "";
    var arrComps=[];
    var arrPlayers=[];
    if (!("guessPlayer" in localStorage)) {
        localStorage.guessPlayer = "unknown";
    }
    // set up courses with details for calculations etc.
    // array ["hole num",par,si]
    // Lakes
    arrLakes = [
      [0, 0, 0],
      [1, 4, 15],
      [2, 4, 7],
      [3, 5, 3],
      [4, 4, 1],
      [5, 3, 17],
      [6, 3, 11],
      [7, 4, 9],
      [8, 4, 5],
      [9, 4, 13],
      [10, 3, 16],
      [11, 4, 18],
      [12, 4, 10],
      [13, 4, 6],
      [14, 3, 14],
      [15, 3, 4],
      [16, 5, 12],
      [17, 4, 2],
      [18, 5, 8]
    ];
    // array ["hole num",par,si]
    // Dawson
    arrDawson = [
      [0, 0, 0],
      [1, 5, 13],
      [2, 4, 15],
      [3, 3, 17],
      [4, 4, 3],
      [5, 4, 1],
      [6, 5, 11],
      [7, 4, 7],
      [8, 4, 9],
      [9, 5, 5],
      [10, 4, 16],
      [11, 5, 14],
      [12, 3, 18],
      [13, 4, 2],
      [14, 4, 4],
      [15, 4, 12],
      [16, 3, 6],
      [17, 4, 10],
      [18, 4, 8]
    ];
    // array ["hole num",par,si]
    // OldCourse
    arrOldCourse = [
      [0, 0, 0],
      [1, 5, 14],
      [2, 4, 12],
      [3, 3, 18],
      [4, 5, 8],
      [5, 3, 16],
      [6, 4, 6],
      [7, 4, 2],
      [8, 4, 13],
      [9, 4, 4],
      [10, 4, 5],
      [11, 3, 17],
      [12, 4, 11],
      [13, 4, 3],
      [14, 5, 10],
      [15, 3, 7],
      [16, 5, 15],
      [17, 4, 1],
      [18, 5, 9]
    ];
    
    //=============================================================
    // function downloader()
    // - gets data to create arrays for players, hcps, comps
    // - papaparse uses HTML5's filereader API to get csv file
    //=============================================================  
    function downloader() {
      // setupcsv
      var public_hcp_url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR5UUmQIocKfgsPnXGZZW-kBqNNEgOIm8r4Wdn9wOWqAXHht-1iZCPSDcalB0bhAIUUR5Me7fBufma_/pub?gid=581380869&single=true&output=csv";
      var strng1 = "strng1"; // player
      var strng2 = "strng2"; // hcp
      var strng3 = "strng3"; // comp
      i=0;  
      var guessedPlayer = localStorage.guessPlayer
      var guessedHCP=0    
      
      showDownloadingInfoMsg()
      
      try {
        // if it fails after 20 seconds, put up error message
        setTimeout(function() {
          if (!(strng2.length) > 0) {
            alert("failed");
          }
        }, 20000);
        Papa.parse(public_hcp_url, {
          download: true,
          header: true,
          step: function(results, parser) {
             strng1 = results.data.players;
             // add row
             arrPlayers.push([strng1,0]);
             strng3 = results.data.comps;
             arrComps[i] = strng3;
             if (strng1 == guessedPlayer) {
                 guessedHCP = results.data.hcp;
             }
             i++
          },
          complete: function() {
          // global player
          player = guessedPlayer;
          // replace button name
          element = document.getElementById("dropbtn");
          element.innerText = player;
          //=====LocalStorage.player=====
          localStorage.player = player;
          player2submit = player;
          document.getElementById("numhcp").innerHTML = "";
          document.getElementById("numhcp").style.fontSize = "50px";
          document.getElementById("numhcp").style.paddingTop = 0;
          document.getElementById("numhcp").style.paddingBottom = 0;
          document.getElementById("numhcp").innerText = Math.trunc(Number(guessedHCP));
          // update global hcp
          hcp = Math.trunc(Number(guessedHCP));
          //=====LocalStorage.hcp=====
          localStorage.hcp = hcp;
          //==========================
          start();
              }
          })
       
      } // end try
      catch (err) {
        console.log(err.message);
      }
    }

    //=============================================================
    // run downloder() function 
    //=============================================================
    downloader();
    //=============================================================
     
    //=============================================================
    // function start()
    // - initialise everything and do checks etc.
    //=============================================================  
    function start() {
    // check for any new members etc.
    // setup local dropdown if not there
    if (!("dropdown" in localStorage)) {
      //=====LocalStorage.dropdown===================
      localStorage.dropdown = JSON.stringify(arrPlayers);
      //=============================================
    }
    // default notsame to false
    var notsame = false;
    if ("dropdown" in localStorage) {
      // retrieve dropdown info
      var arrOptions = JSON.parse(localStorage.dropdown);
      // see if different number of items
      if (arrOptions.length !== arrPlayers.length) {
        notsame = true;
      } else {
        // Comparing each element of your array
        for (var i = 0; i < arrOptions.length; i++) {
          // see if items are different
          if (arrOptions[i][0] !== arrPlayers[i][0]) {
            notsame = true;
          }
        }
      }
    };

    // if different
    if (notsame) {
      // option is original, arrPlayers is new
      // update new with numbers from original
      for (var i = 0; i < arrOptions.length; i++) {
        for (var j = 0; j < arrPlayers.length; j++) {
          if (arrOptions[i][0] == arrPlayers[j][0]) {
            arrPlayers[j][1] = arrOptions[i][1];
          }
        }
      }
      arrOptions = JSON.parse(JSON.stringify(arrPlayers));
      //=====LocalStorage.dropdown====================
      localStorage.dropdown = JSON.stringify(arrOptions);
      //==============================================
    }

    // bring most commonly selected to the top
    arrOptions.sort(compareSecondColumn);
    // create player dropdown
    var select = document.getElementById("playersDropdown");
    // this is what is created
    //<a id="myLink1" href="#" onclick='dropSelected(this.innerText);return false;'>Graham Airey</a>
    //
    for (var i = 0; i < arrOptions.length; i++) {
      var el = document.createElement("a");
      el.id = "myLink" + (i);
      el.setAttribute("onclick", "dropSelected(this.innerText);return false;");
      el.setAttribute("href", "#");
      el.innerText = arrOptions[i][0];
      select.appendChild(el);
      if (arrOptions[i][1] > 0) {
        document.getElementById("myLink" + (i)).style.color = "blue";
        document.getElementById("myLink" + (i)).style.background = "lightBlue";
      }
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function (event) {
      if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    };
    // get todays date eg 26 June
    dd = new Date();
    // get date number and format it
    d1 = dd.getDate();
    if (d1 < 10) {
      d1 = "0" + d1;
    }
    // get month and format it
    d2 = dd.getMonth();

    if (d2 == 0) {
      m = "January";
    }
    if (d2 == 1) {
      m = "February";
    }
    if (d2 == 2) {
      m = "March";
    }
    if (d2 == 3) {
      m = "April";
    }
    if (d2 == 4) {
      m = "May";
    }
    if (d2 == 5) {
      m = "June";
    }
    if (d2 == 6) {
      m = "July";
    }
    if (d2 == 7) {
      m = "August";
    }
    if (d2 == 8) {
      m = "September";
    }
    if (d2 == 9) {
      m = "October";
    }
    if (d2 == 10) {
      m = "November";
    }
    if (d2 == 11) {
      m = "December";
    }
    dateToday = d1 + " " + m;
    // tidy localStorage if out of date to allow new "blank" setup
    if ("comp" in localStorage) {
      if (localStorage.comp.indexOf(dateToday) == -1) {
        // tidy
        clearCache();
      }
    }

    // recover data if dates match
    // this allows data to be kept over refreshes
    if ("comp" in localStorage) {
      if (localStorage.comp.indexOf(dateToday) > -1) {
        // recover
        recoverFromLocalStorage();
      }
    }

    // see if it is a compday and if so find comp and course from array list
    for (i = 0; i < arrComps.length; i++) {
      // if today - eg. "22 June" in arrComps list then compday = "yes"
      if (arrComps[i].indexOf(d1 + " " + m) > -1) {
        compday = "yes";
        comp = arrComps[i];
   
        if (arrComps[i].indexOf("Lakes") > -1) {
          // global course
          course = "Lakes";
          // localStorage course
          localStorage.course = "Lakes";
        }
        if (arrComps[i].indexOf("Dawson") > -1) {
          // global course
          course = "Dawson";
          // localStorage course
          localStorage.course = "Dawson";
        }
        if (arrComps[i].indexOf("OldCourse") > -1) {
          // global course
          course = "OldCourse";
          // localStorage course
          localStorage.course = "OldCourse";
        }
      }
    }

    if (compday == "yes") {
      localStorage.comp = comp;
    }
  
    // if not a compday find out what course is played and create a comp
    if (compday == "no") {
      if (!("comp" in localStorage)) {
        //showCourseChoice();
        returnToMenu();
      }
  
    }
    // recover	
    if (comp == localStorage.comp) {
      recoverFromLocalStorage();
    }
    // show comp info message for 3 seconds
    if ("comp" in localStorage) {
      showCompMessage();
    }
    } // end function start()

    //=============================================================
    // functions - run when called
    //=============================================================  

    //=============================================================
    // function resetNames()
    // - gets rid of "selected" names
    //=============================================================  
    function resetNames() {
      // create/recreate arrOptions favourites
      // run from menu item at bottom of list
      arrOptions = JSON.parse(JSON.stringify(arrPlayers));
      // update local storage
      //=====LocalStorage.dropdown====================
      localStorage.dropdown = JSON.stringify(arrOptions);
      //==============================================
      // bring most commonly selected to the top
      // arrOptions.sort(compareSecondColumn);
      // create player dropdown
      var select = document.getElementById("playersDropdown");
      // empty names
      select.innerHTML = "";
      // redo list for menu
      // <a id="myLink1" href="#" onclick='dropSelected(this.innerText);return false;'>Graham Airey</a>
      //
      for (var i = 0; i < arrOptions.length; i++) {
        var el = document.createElement("a");
        el.id = "myLink" + (i + 1);
        el.setAttribute("onclick", "dropSelected(this.innerText);return false;");
        el.setAttribute("href", "#");
        el.innerText = arrOptions[i][0];
        select.appendChild(el);
      }
    }

    //=============================================================
    // function compareSecondColumn()
    // - sort function to sort by second array item in 2D array
    //=============================================================  
    function compareSecondColumn(a, b) {
      if (a[1] === b[1]) {
        return 0;
      } else {
        return (a[1] > b[1]) ? -1 : 1;
      }
    }
    // name selected, do stuff
    function dropSelected(playerName) {

      if (playerName == "reset list") {
        resetNames();
      } else {
        // retrieve dropdown info
        var arrOptions = JSON.parse(localStorage.dropdown);
        for (var k = 0; k < arrOptions.length; k++) {
          if (arrOptions[k][0] == playerName) {
            found = true;
            pos = k;
          }
        }
        // change color on selection
        document.getElementById("myLink" + pos.toString()).style.color = "blue";
        document.getElementById("myLink" + pos.toString()).style.background = "lightBlue";
        // update player choice
        player2submit = document.getElementById("myLink" + pos.toString()).innerText;
        if (pos >= 0) {
          // increment number of times chosen
          var tc = parseInt(arrOptions[pos][1]) + 1;
          arrOptions[pos][1] = tc;
          // store new order
          //=====LocalStorage.dropdown====================
          localStorage.dropdown = JSON.stringify(arrOptions);
          //==============================================
          // global player
          player = playerName;
          //=====LocalStorage.guessPlayer=====
          localStorage.guessPlayer = player;
          //=============================
        }
        
        // replace button name
        element = document.getElementById("dropbtn");
        element.innerText = player;
        // update player choices
        // reset hole scores
        //=====LocalStorage.player=====
        localStorage.player = player;
        //=============================
        //=====LocalStorage.guessPlayer=====
        localStorage.guessPlayer = player;
        //=============================
        player2submit = player;
        // close dropdown
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
        doGetHCP();
      }
    }

    //=============================================================
    // function toggleDropdown()
    // - show player name choices
    //=============================================================  
    function toggleDropdown() {
      // When the user clicks on the button, toggle between hiding and showing the dropdown content
      document.getElementById("playersDropdown").classList.toggle("show");
    }

    //=============================================================
    // function checkDirection()
    // - look after swipes etc.
    // global keep track of swipes
    //=============================================================  
    var touchstartX = 0;
    var touchendX = 0;
    // do stuff when swiped
    function checkDirection() {
      if (touchendX < touchstartX) {
         if (localStorage.getItem("player") == null || localStorage.getItem("hcp") == null) {
          // prevent some false messages
          if ((touchstartX - touchendX) > 100) {
            showSetPlayerMessage();
          }
        }
      }
    }
    document.addEventListener('touchstart', e => {
      touchstartX = e.changedTouches[0].screenX;
    });
    document.addEventListener('touchend', e => {
      touchendX = e.changedTouches[0].screenX;
      checkDirection();
    });

    //====================================================
    //
    //====================================================

    //=============================================================
    // function submitForm()
    // - send info from HTML form to google form
    //=============================================================  
 
    function submitForm() {
      // get the relevant info into a form
      // dont allow submit for an incorrect day
      if (compday == "yes") {
        document.getElementById('mx474474348').value = player;
        document.getElementById('mx2131369517').value = comp;
        document.getElementById('mx477101370').value = hcp;
        document.getElementById('mx1980297491').value = document.getElementById("h1").innerText;
        document.getElementById('mx463832232').value = document.getElementById("h2").innerText;
        document.getElementById('mx205704642').value = document.getElementById("h3").innerText;
        document.getElementById('mx278278589').value = document.getElementById("h4").innerText;
        document.getElementById('mx949547387').value = document.getElementById("h5").innerText;
        document.getElementById('mx703011397').value = document.getElementById("h6").innerText;
        document.getElementById('mx1460583253').value = document.getElementById("h7").innerText;
        document.getElementById('mx462940045').value = document.getElementById("h8").innerText;
        document.getElementById('mx477691508').value = document.getElementById("h9").innerText;
        document.getElementById('mx413249407').value = document.getElementById("h10").innerText;
        document.getElementById('mx108900453').value = document.getElementById("h11").innerText;
        document.getElementById('mx1841236411').value = document.getElementById("h12").innerText;
        document.getElementById('mx1864644918').value = document.getElementById("h13").innerText;
        document.getElementById('mx1538428689').value = document.getElementById("h14").innerText;
        document.getElementById('mx1449918213').value = document.getElementById("h15").innerText;
        document.getElementById('mx38761817').value = document.getElementById("h16").innerText;
        document.getElementById('mx247392471').value = document.getElementById("h17").innerText;
        document.getElementById('mx741809181').value = document.getElementById("h18").innerText;
        document.getElementById('mx1362729237').value = document.getElementById("p1").innerText;
        document.getElementById('mx1372983908').value = document.getElementById("p2").innerText;
        document.getElementById('mx2002196917').value = document.getElementById("p3").innerText;
        document.getElementById('mx640802794').value = document.getElementById("p4").innerText;
        document.getElementById('mx2076656246').value = document.getElementById("p5").innerText;
        document.getElementById('mx486346919').value = document.getElementById("p6").innerText;
        document.getElementById('mx1918313229').value = document.getElementById("p7").innerText;
        document.getElementById('mx638821').value = document.getElementById("p8").innerText;
        document.getElementById('mx737099688').value = document.getElementById("p9").innerText;
        document.getElementById('mx488827232').value = document.getElementById("p10").innerText;
        document.getElementById('mx1203421487').value = document.getElementById("p11").innerText;
        document.getElementById('mx979421831').value = document.getElementById("p12").innerText;
        document.getElementById('mx929858153').value = document.getElementById("p13").innerText;
        document.getElementById('mx1330487443').value = document.getElementById("p14").innerText;
        document.getElementById('mx940496448').value = document.getElementById("p15").innerText;
        document.getElementById('mx1127168348').value = document.getElementById("p16").innerText;
        document.getElementById('mx638332104').value = document.getElementById("p17").innerText;
        document.getElementById('mx1626319908').value = document.getElementById("p18").innerText;
        document.getElementById('mx362674948').value = document.getElementById("pfront").innerText;
        document.getElementById('mx544180710').value = document.getElementById("pback").innerText;
        document.getElementById('mx893562950').value = document.getElementById("ptotal").innerText;
        //document.getElementById('mx335596501').value = document.getElementById("cback9");
        document.getElementById('mx335596501').value = document.getElementById("pback").innerText;
        tempcb6 = 0;
        tempcb6 += parseInt(document.getElementById("p18").innerText);
        tempcb6 += parseInt(document.getElementById("p17").innerText);
        tempcb6 += parseInt(document.getElementById("p16").innerText);
        tempcb6 += parseInt(document.getElementById("p15").innerText);
        tempcb6 += parseInt(document.getElementById("p14").innerText);
        tempcb6 += parseInt(document.getElementById("p13").innerText);
        tempcb3 = 0;
        tempcb3 += parseInt(document.getElementById("p18").innerText);
        tempcb3 += parseInt(document.getElementById("p17").innerText);
        tempcb3 += parseInt(document.getElementById("p16").innerText);
        document.getElementById('mx1453506389').value = tempcb6;
        document.getElementById('mx1045870519').value = tempcb3;
        document.getElementById('mx683300283').value = document.getElementById("p18").innerText;

        //temp2 = 0;
        twoscount = 0;
        // check data is complete 
        checkBeforeSubmitID = "\n";
        err = "no";
        for (ii = 1; ii <= 18; ii++) {
          if (document.getElementById("h" + ii).innerText == "2") {
            twoscount++;
          }
          // check for no score entered
          if (document.getElementById("numscore" + ii).innerText.indexOf("hole") > -1) {
            if (checkBeforeSubmitID.length < 50) {
              checkBeforeSubmitID += "hole " + ii + " not scored\n";
              err = "yes";
            }
          }
        }
        document.getElementById('mx967906330').value = twoscount.toString();
        document.getElementById('mx789190149').value = comp + player;
        if (player == "select player") {
          checkBeforeSubmitID += "player not set\n"
          err = "yes";
        }
        if (hcp == "0") {
          checkBeforeSubmitID += "hcp not set\n"
          err = "yes";
        }
        if (err == "yes") {
          // error message
          checkBeforeSubmitID = checkBeforeSubmitID + "\n... maybe more.\n";
          showIncompleteSubmitData(checkBeforeSubmitID);
        } else {
          //===== submit data ==========
          //============================
          document.forms[0].submit();
          //============================
          // hide icons to allow tick etc.
          document.getElementById('limg').style.visibility = "hidden";
          document.getElementById('rimg').style.visibility = "hidden";
          document.getElementById('mimgl').style.visibility = "hidden";
          document.getElementById('mimgr').style.visibility = "hidden";
          // hide button
          document.getElementById("submit").style.visibility = "visible";
          // allow some time for submit then give a completion message
          // keep user interested by showing icons ???

          // show sending icon
          document.getElementById('submit').innerText = "";
          // show empty text which is placeholder for image
          document.getElementById('submit').innerHTML =
            '<img src="uploada.png" style="height: 100px; width: 100px;">'

          setTimeout(function () {
            document.getElementById('submit').innerHTML =
              '<img src="tick1.png" style="height: 100px; width: 100px;">'
          }, 6500);

          // return to main menu
          setTimeout(function () {
            window.location.assign("winter2023.html");
          }, 7500);
        }
      }
    }
    //=============================================================
    // function incrementScore()
    // - plus button handler
    //=============================================================  
    // + button for hole scores
    function incrementScore(id) {
      incScore = document.getElementById(id).innerText;
      if (incScore.indexOf("hole") > -1) {
        document.getElementById(id).style.fontSize = "3vmax";
        document.getElementById(id).style.paddingTop = 0;
        incScore = 0;
      }
      document.getElementById(id).innerText = ++incScore;
      if (++incScore >= 0) {
        document.getElementById(id).style.fontSize = "5vmax";
        --incScore;
      }
      document.getElementById(id.replace("numscore", "h")).innerText = incScore;
      if (course == "Lakes") {
        par = arrLakes[id.replace("numscore", "")][1];
        si = arrLakes[id.replace("numscore", "")][2];
      }
      if (course == "Dawson") {
        par = arrDawson[id.replace("numscore", "")][1];
        si = arrDawson[id.replace("numscore", "")][2];
      }
      if (course == "OldCourse") {
        par = arrOldCourse[id.replace("OldCourse", "")][1];
        si = arrOldCourse[id.replace("OldCourse", "")][2];
      }
      document.getElementById(id.replace("numscore", "p")).innerText = pointsCalc(hcp, par, si, incScore);
      totalScore();
      // update local storage
      //=====LocalStorage.holes===========================================
      localStorage.setItem("hole" + id.replace("numscore", ""), incScore);
      //==================================================================
    }

    ///=============================================================
    // function decrementScore()
    // - minus button handler
    //=============================================================  
    function decrementScore(id) {
      incScore = document.getElementById(id).innerText;
      // if already at 0 say what hole it is
      if (incScore == 0) {
        document.getElementById(id).style.fontSize = "3vmax";
        holenum = id.replace("numscore", "");
        document.getElementById(id).innerText = "hole " + holenum;
      } else {
        if (incScore.indexOf("hole") > -1) {
          document.getElementById(id).style.fontSize = "5vmax";
          incScore = 0;
        }
        if (incScore > 0) {
          document.getElementById(id).style.fontSize = "5vmax";
          --incScore;
        }
        document.getElementById(id).innerText = incScore;
        document.getElementById(id.replace("numscore", "h")).innerText = incScore;
        if (course == "Lakes") {
           par = arrLakes[id.replace("numscore", "")][1];
           si = arrLakes[id.replace("numscore", "")][2];
        }
        if (course == "Dawson") {
           par = arrDawson[id.replace("numscore", "")][1];
           si = arrDawson[id.replace("numscore", "")][2];
        }
        if (course == "OldCourse") {
           par = arrOldCourse[id.replace("OldCourse", "")][1];
           si = arrOldCourse[id.replace("OldCourse", "")][2];
        }
        document.getElementById(id.replace("numscore", "p")).innerText = pointsCalc(hcp, par, si, incScore);
      }
      totalScore();
      // update local storage
      // if incScore = "hole 1" etc., remove key from localStorage
      if (document.getElementById(id).innerText.indexOf("hole") > -1) {
        localStorage.removeItem("hole" + id.replace("numscore", ""));
      } else {
        //=====LocalStorage.holes===========================================
        localStorage.setItem("hole" + id.replace("numscore", ""), incScore);
        //==================================================================
      }
    }

    //=============================================================
    // function totalScore()
    // - total score calculation
    //=============================================================  
    // calculated additional totals, countback etc.
    function totalScore() {
      var ih = 0;
      var ip = 0;
      var c6 = 0;
      var c3 = 0;
      var c1 = 0;
      var cb = 0;
      var jh = 0;
      var jp = 0;
      for (i = 1; i <= 9; i++) {
        ih += parseInt(document.getElementById("h" + i).innerText);
        ip += parseInt(document.getElementById("p" + i).innerText);
      }
      for (j = 10; j <= 18; j++) {
        jh += parseInt(document.getElementById("h" + j).innerText);
        jp += parseInt(document.getElementById("p" + j).innerText);
        if (j >= 13) {
          c6 = c6 + parseInt(document.getElementById("p" + j).innerText);
        }
        if (j >= 16) {
          c3 = c3 + parseInt(document.getElementById("p" + j).innerText);
        }
        if (j == 18) {
          c1 = parseInt(document.getElementById("p" + j).innerText);
        }
      }
      document.getElementById("hfront").innerText = ih;
      document.getElementById("hback").innerText = jh;
      document.getElementById("pfront").innerText = ip;
      document.getElementById("pback").innerText = jp;
      document.getElementById("htotal").innerText = ih + jh;
      document.getElementById("ptotal").innerText = ip + jp;
      cb = "9=" + jp + ", 6=" + c6 + ", 3=" + c3 + ", 1=" + c1;
      document.getElementById("cback").innerText = cb;
    }

    //=============================================================
    // function pointsCalc()
    // - convert scores to stableford points
    //=============================================================  
    function pointsCalc(hcp, par, si, score) {
      allowance = 0;
      if (score == 0) {
        return 0;
      } else {
        // allowance   
        if (hcp >= si) {
          allowance = 1;
        }
        if (hcp >= (18 + si)) {
          allowance = 2;
        }
        if (hcp >= (36 + si)) {
          allowance = 3;
        }
        // points
        var points = (par + allowance + 2) - score;
        // remove negative numbers
        if (points < 0) {
          points = 0;
        }
        return points;
      }
    }

    //=============================================================
    // function doGetHCP()
    // - papaparse uses HTML's filereader API to get info from csv file
    //=============================================================  
    function doGetHCP() {
      // show hcp and controls on screen
      document.getElementById("hcpwrapper").style.visibility = "visible";
      // changed to change hcp on any player change
      document.getElementById("numhcp").innerHTML = '<img src="throbber.gif" width=50 height=50>'
      var public_hcp_url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR5UUmQIocKfgsPnXGZZW-kBqNNEgOIm8r4Wdn9wOWqAXHht-1iZCPSDcalB0bhAIUUR5Me7fBufma_/pub?gid=836261355&single=true&output=csv";
      strng2 = "?";
      try {
        // if it fails after 20 seconds, put up error message
        setTimeout(function () {
          if (!(Math.trunc(strng2) > 0)) {
            showMessageRetryHCPFailed();
          }
        }, 20000);
        Papa.parse(public_hcp_url, {
          download: true,
          header: true,
          step: function (results, parser) {
            if (results.data.player.indexOf(player) > -1) {
              strng2 = results.data.hcp;
              parser.abort;
            }
          },
          complete: function () {
            if (Math.trunc(strng2) > 0) {
              document.getElementById("numhcp").innerHTML = "";
              document.getElementById("numhcp").style.fontSize = "5vmax";
              document.getElementById("numhcp").innerText = Math.trunc(strng2);
              // update global hcp
              hcp = Math.trunc(strng2);
              //=====LocalStorage.hcp=====
              localStorage.hcp = hcp;
              //==========================
              // recalc scores to cope with any new lookup
              recalcScores();
            }
          }
        });
      } // end try
      catch (err) {
        console.log(err.message);
      }
    }

    //=============================================================
    // function recalcScores()
    // - recalculate scores etc. redo score/points calculations for 18 holes
    //=============================================================
    function recalcScores() {
      for (i = 1; i <= 18; i++) {
        tempscore = document.getElementById("numscore" + i).innerText;
        if (tempscore.indexOf("hole") > -1) {
          tempscore = "0";
        }
        if (course == "Lakes") {
          temppar = arrLakes[i][1];
          tempsi = arrLakes[i][2];
        }
        if (course == "Dawson") {
          temppar = arrDawson[i][1];
          tempsi = arrDawson[i][2];
        }
        if (course == "OldCourse") {
          temppar = arrOldCourse[i][1];
          tempsi = arrOldCourse[i][2];
        }
        temppoints = pointsCalc(hcp, temppar, tempsi, tempscore);
        document.getElementById("h" + i).innerText = tempscore;
        document.getElementById("p" + i).innerText = temppoints;
      }
      totalScore();
    }

    //=============================================================
    // function toggleContrast()
    // - switches to and from high contrast mode
    //=============================================================  
    function togglecontrast() {
      var elements = document.getElementsByClassName('wrapperforscoring'); // get all elements
      // toggle blue and dodgerBlue
      if (elements[0].style.backgroundColor !== "blue") {
        elements[0].style.backgroundColor = "blue"
        elements[1].style.backgroundColor = "blue"
        document.getElementById("dropbtn").style.backgroundColor = "blue"
        document.getElementById("hcpwrapper").style.backgroundColor = "blue"
        document.getElementById("submit").style.backgroundColor = "blue"
        document.body.style.fontWeight = "700";
      } else {
        elements[0].style.backgroundColor = "dodgerBlue"
        elements[1].style.backgroundColor = "dodgerBlue"
        document.getElementById("dropbtn").style.backgroundColor = "dodgerBlue"
        document.getElementById("hcpwrapper").style.backgroundColor = "dodgerBlue"
        document.getElementById("submit").style.backgroundColor = "dodgerBlue"
        document.body.style.fontWeight = "400";
      }
    }

    //=============================================================
    // function recoverFromLocalStorage()
    // - retrieves locally saved temp data to retain integrity over refreshes
    //=============================================================  
    function recoverFromLocalStorage() {
      // put other values back
      // player
      if (("player") in localStorage) {
        document.getElementById("dropbtn").innerText = localStorage.getItem("player");
      } else {
        document.getElementById("dropbtn").innerText = "select player";
      }
      player = document.getElementById("dropbtn").innerText;
      // hcp
      if (("hcp") in localStorage) {
        document.getElementById("numhcp").innerText = localStorage.getItem("hcp");
        document.getElementById("numhcp").style.fontSize = "5vmax";
        // make hcp visible
        document.getElementById("hcpwrapper").style.visibility = "visible";
        // make submit visible
      } else {
        document.getElementById("numhcp").innerText = "?";
      }
      hcp = document.getElementById("numhcp").innerText;
      if ("comp" in localStorage) {
        //=====LocalStorage.comp============
        comp = localStorage.getItem("comp");
        //==================================
      }
      if ("course" in localStorage) {
        //=====LocalStorage.course==============
        course = localStorage.getItem("course");
        //======================================
      }
      //	recalc points etc.
      for (var i = 1; i <= 18; i++) {
        // put values for holes back
        if (("hole" + i) in localStorage) {
          document.getElementById("numscore" + i).innerText = localStorage.getItem("hole" + i);
          document.getElementById("numscore" + i).style.fontSize = "5vmax";
          document.getElementById("h" + i).innerText = localStorage.getItem("hole" + i);
        } else {
          // change to hole1 etc and change font size
          document.getElementById("h" + i).innerText = "0";
          document.getElementById("numscore" + i).innerText = "hole " + i;
        }
      }
      for (var i = 1; i <= 18; i++) {
        // calc points
        if (course == "Lakes") {
          par = arrLakes[i][1];
          si = arrLakes[i][2];
        }
        if (course == "Dawson") {
          par = arrDawson[i][1];
          si = arrDawson[i][2];
        }
        if (course == "OldCourse") {
          par = arrOldCourse[i][1];
          si = arrOldCourse[i][2];
        }
        if (("hole" + i) in localStorage) {
          document.getElementById("p" + i).innerText = pointsCalc(hcp, par, si, localStorage.getItem("hole" + i));
        } else {
          document.getElementById("p" + i).innerText = "0";
        }
      }
      totalScore();
    }

    //=============================================================
    // function clearCache()
    // - wipe saved local storage but not player list
    //=============================================================  
    function clearCache() {
      localStorage.removeItem("player");
      localStorage.removeItem("hcp");
      localStorage.removeItem("comp");
      localStorage.removeItem("course");
      for (var i = 1; i <= 18; i++) {
        localStorage.removeItem("hole" + i);
      }
      recoverFromLocalStorage();
      location.reload();
    }

    //=============================================================
    // function showCompMessage()
    // - message showing what competition is in place
    //=============================================================  
    function showCompMessage() {
      aborttxt = "\nScoring for " + comp + "\ncompetition\n\n";
      document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 5 seconds";
      document.getElementById("popuppanel").style.display = "block";
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 4 seconds" }, 1000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 3 seconds" }, 2000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 2 seconds" }, 3000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 1 second" }, 4000)
      setTimeout(function () {
        document.getElementById("popuppanel").innerText = ""
        document.getElementById("popuppanel").style.display = "none"
      }, 5000);
    }

    //=============================================================
    // function showIncompleteSubmitData()
    // - message about not allowing a submit of incomplete data
    //=============================================================  
    function showIncompleteSubmitData(msg) {
      aborttxt = "\nSubmit for " + comp + "\nfailed - incomplete data.\n" + msg + "\n\n";
      document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 5 seconds";
      document.getElementById("popuppanel").style.display = "block";
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 4 seconds" }, 1000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 3 seconds" }, 2000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 2 seconds" }, 3000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 1 second" }, 4000)
      setTimeout(function () {
        document.getElementById("popuppanel").innerText = ""
        document.getElementById("popuppanel").style.display = "none"
      }, 5000);
    }

    //=============================================================
    // function showMessageRetryHCP()
    // - message about retrying to get HCP
    //=============================================================  
    function showMessageRetryHCP() {
      document.getElementById("popuppanel").innerText = "\nHCP lookup failed - retrying ...\n\n";
      document.getElementById("popuppanel").style.display = "block";
      setTimeout(function () {
        document.getElementById("popuppanel").innerText = "";
        document.getElementById("popuppanel").style.display = "none";
        // put back hcp
        document.getElementById("numhcp").innerHTML = "";
        document.getElementById("numhcp").innerText = "?";
      }, 3000);
    }

    //=============================================================
    // function showMessageRetryHCPFailed()
    // - message about failure to get HCP
    //=============================================================  
    function showMessageRetryHCPFailed() {
      document.getElementById("popuppanel").innerText = "\nHCP lookup failed.\n\n" + "check the network and try again.\n\n";
      document.getElementById("popuppanel").style.display = "block";
      setTimeout(function () {
        document.getElementById("popuppanel").innerText = "";
        document.getElementById("popuppanel").style.display = "none";
        // put back hcp
        document.getElementById("numhcp").innerHTML = "";
        document.getElementById("numhcp").innerText = "?";
      }, 3000);
    }

    //=============================================================
    // function showDownloadingInfoMsg()
    // - show message when downloading player and course info and creating arrays
    //=============================================================  
    function showDownloadingInfoMsg() {
       document.getElementById("popuppanel").innerHTML = '<br>Retrieving Course and Player information.<br><br><img src="throbber.gif" width=50 height=48>';
      document.getElementById("popuppanel").style.display = "block";
    }
    
    //=============================================================
    // function showHole()
    // - shows which hole when score is tapped
    //=============================================================  
    function showHole(id) {
      tempe = document.getElementById(id);
      tempsaved = tempe.innerText;
      // only do it if number is obscuring hole number
      if (tempsaved.indexOf("hole") == -1) {
        // change to hole1 etc.
        tempe.innerText = id.replace("numscore", "hole ");
        tempe.style.color = "lime";
        // disable click
        for (var i = 1; i <= 18; i++) {
          document.getElementById("numscore" + i).style.pointerEvents = 'none';
        }
        // put info back
        setTimeout(function () {
          // re-enable click
          for (var i = 1; i <= 18; i++) {
            document.getElementById("numscore" + i).style.pointerEvents = '';
          }
          tempe.style.color = "white";
          tempe.innerText = tempsaved;
        }, 500);
      }
    }
    //=============================================================
    // function showSetPlayerMessage()
    // - message about player not being selected
    //=============================================================  
    function showSetPlayerMessage() {
      aborttxt = "\nPlayer and HCP have not been set, do this before entering scores.\n\n";
      document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 5 seconds";
      document.getElementById("popuppanel").style.display = "block";
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 4 seconds" }, 1000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 3 seconds" }, 2000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 2 seconds" }, 3000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 1 second" }, 4000)
      setTimeout(function () {
        document.getElementById("popuppanel").innerText = ""
        document.getElementById("popuppanel").style.display = "none"
      }, 5000);
      setTimeout(function () {
        document.getElementById("popuppanel").innerText = "";
        document.getElementById("popuppanel").style.display = "none";
      }, 3000);
    }

   //=============================================================
    // function returnToMenu()
    // - no comp so return to menu
    //=============================================================  
    function returnToMenu() {
      aborttxt = "\nNo competition today\nso returning you to the previous screen.\n\n";
      document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 5 seconds";
      document.getElementById("popuppanel").style.display = "block";
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 4 seconds" }, 1000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 3 seconds" }, 2000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 2 seconds" }, 3000)
      setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "this message closes in 1 second" }, 4000)
      setTimeout(function () {
        document.getElementById("popuppanel").innerText = ""
        document.getElementById("popuppanel").style.display = "none"
        history.go(-2);  
      }, 5000);
    }

    //=============================================================
    // function ccclose()
    // - closes scorecard
    //=============================================================  
    function ccclose() {
      document.getElementById("showcoursecard").style.visibility = "hidden";
    }

    //=============================================================
    // function showcoursecard()
    // - shows course card info
    //=============================================================  
    function showcoursecard() {
      abort = "no";
      aborttxt = "\nStrokes unavailable\nbecause:\n\n";
      if (!(hcp > 0)) {
        abort = "yes";
        aborttxt += "\nhcp not found\n"
      } aborttxt
      if (player == "select player") {
        abort = "yes"
        aborttxt += "\nplayer not found\n"
      }
      if (!(course == "Lakes" || course == "Dawson" || course == "OldCourse")) {
        abort = "yes"
        aborttxt += "\ncourse not found\n"
      }
      if (abort == "yes") {
        document.getElementById("popuppanel").innerText = aborttxt + "\n\nthis message closes in 5 seconds";
        document.getElementById("popuppanel").style.display = "block";
        setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "\n\nthis message closes in 4 seconds" }, 1000)
        setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "\n\nthis message closes in 3 seconds" }, 2000)
        setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "\n\nthis message closes in 2 seconds" }, 3000)
        setTimeout(function () { document.getElementById("popuppanel").innerText = aborttxt + "\n\nthis message closes in 1 second" }, 4000)
        setTimeout(function () {
          document.getElementById("popuppanel").innerText = ""
          document.getElementById("popuppanel").style.display = "none"
        }, 5000);
      } else {
        cctxt = ""
        if (course == "Lakes") {
          cctxt = player + ", Lakes, " + hcp + " hcp"
          for (var i = 1; i <= 18; i++) {
            if (hcp >= (arrLakes[i][2] + 18)) {
              cctxt += '<span class="cyanhole"><b><br>hole ' + arrLakes[i][0] + ", par " + arrLakes[i][1] +
                ", si " + '<span class="circle2">' + arrLakes[i][2] + "</span></b></span>"
            } else {
              if (hcp >= arrLakes[i][2]) {
                cctxt += "<b><br>hole " + arrLakes[i][0] + ", par " + arrLakes[i][1] + ", si " +
                  '<span class="circle1">' + arrLakes[i][2] + "</span></b>"
              } else {
                cctxt += '<span class="nocircle1">' + "<br>hole " + arrLakes[i][0] + ", par " +
                  arrLakes[i][1] + ", si  " + arrLakes[i][2] + "</span>"
              }
            }
          }
        }
        if (course == "Dawson") {
          cctxt = player + ", Dawson, " + hcp + " hcp"
          for (var i = 1; i <= 18; i++) {
            if (hcp >= (arrDawson[i][2] + 18)) {
              cctxt += '<span class="cyanhole"><b><br>hole ' + arrDawson[i][0] + ", par " + arrDawson[i][1] +
                ", si " + '<span class="circle2">' + arrDawson[i][2] + "</span></b></span>"
            } else {
              if (hcp >= arrDawson[i][2]) {
                cctxt += "<b><br>hole " + arrDawson[i][0] + ", par " + arrDawson[i][1] + ", si " +
                  '<span class="circle1">' + arrDawson[i][2] + "</span></b>"
              } else {
                cctxt += '<span class="nocircle1">' + "<br>hole " + arrDawson[i][0] + ", par " +
                  arrDawson[i][1] + ", si  " + arrDawson[i][2] + "</span>"
              }
            }
          }
        }
        if (course == "OldCourse") {
          cctxt = player + ", OldCourse, " + hcp + " hcp"
          for (var i = 1; i <= 18; i++) {
            if (hcp >= (arrOldCourse[i][2] + 18)) {
              cctxt += '<span class="cyanhole"><b><br>hole ' + arrOldCourse[i][0] + ", par " + arrOldCourse[i][1] +
                ", si " + '<span class="circle2">' + arrOldCourse[i][2] + "</span></b></span>"
            } else {
              if (hcp >= arrOldCourse[i][2]) {
                cctxt += "<b><br>hole " + arrOldCourse[i][0] + ", par " + arrOldCourse[i][1] + ", si " +
                  '<span class="circle1">' + arrOldCourse[i][2] + "</span></b>"
              } else {
                cctxt += '<span class="nocircle1">' + "<br>hole " + arrOldCourse[i][0] + ", par " +
                  arrOldCourse[i][1] + ", si  " + arrOldCourse[i][2] + "</span>"
              }
            }
          }
        }
      }
      cctxt += "<br>"
      cctxt += "<br> . . . tap to close."
      cctxt += "<br><br><br><br>"
      document.getElementById("showcoursecard").innerHTML = cctxt;
      document.getElementById("showcoursecard").style.visibility = "visible";
    }

    //=============================================================
    // function rclose()
    // - closes rules info
    //=============================================================  
    function rclose() {
      document.getElementById("showrules").style.visibility = "hidden";
    }

    //=============================================================
    // function showrules()
    // - display rules
    //=============================================================
    function showrules() {
      const d = new Date();
      var month = d.getMonth();
      //rules from email 25th September
      var rulestxt = '<span class="cyanhole"><b>From Oct 1st to Oct 31st inclusive</b><br></b></span>'
      rulestxt += '<br>'
      rulestxt += '1. Preferred lies on Fairway and Fringes of Greens (Mark your ball, lift clean and place within 6 inches. No nearer the hole)<br><br>'
      rulestxt += '2. Semi Rough (Mark your ball, lift Clean and Replace)<br><br>'
      rulestxt += '3. Rough (Play the ball as it lies)<br><br>'
      rulestxt += '4. Casual Water (Nearest point of relief no nearer the hole) 1 club length from that point, drop the ball. If your ball is in the rough and in casual water, nearest point of relief no nearer the hole, one club length from that point, drop the ball. The ball may be cleaned if taking relief from casual water in the rough.<br><br>'
      rulestxt += '<span class="cyanhole"><b>November 1st to 31st March 2024</b><br></b></span>'
      rulestxt += '<br>'
      rulestxt += 'As above with additions'
      rulestxt += '<br><br>'
      rulestxt += "1. The Seniors Section will be keeping all Par 5's as Par 5's."
      rulestxt += '<br><br>'
      rulestxt += "2. Bounce boards, mats and tees may be used on Fairways and Fringes of Greens. These are not to be used in 'Semi Rough' or 'Rough Areas'."
      rulestxt += '<br><br>'
      rulestxt += '3. Semi rough will be lift clean and replace. Rough will be (play as it lies)'
      rulestxt += '<br><br>'
      rulestxt += '4. Drivers are not to be used on bounce boards, mats or tees after the initial tee shot, they can, however, be used from the grass.'
      rulestxt += '<br><br>'
      rulestxt += "5. Bunkers will be 'pick rake and place' Unless otherwise stated on the whiteboard at registration."
      rulestxt += "<br><br>"
      rulestxt += "<br> . . . tap to close."
      rulestxt += "<br><br><br><br>"
      document.getElementById("showrules").innerHTML = rulestxt;
      document.getElementById("showrules").style.visibility = "visible";
    }

  </script>
</body>

</html>
